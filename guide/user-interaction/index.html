<!DOCTYPE html>

<html lang="zh-CN" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>用户交互指南 &mdash; CMake 3.29.1-g21d0c57 Documentation</title>

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a2c47e09" />
    <link rel="stylesheet" type="text/css" href="../../_static/cmake.css?v=3e562cf9" />
    
    <script src="../../_static/documentation_options.js?v=17f7ec5f"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=beaddf03"></script>
    
    <link rel="icon" href="../../_static/cmake-favicon.ico"/>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="使用依赖项指南" href="../using-dependencies/index.html" />
    <link rel="prev" title="步骤12：打包调试和发布" href="../tutorial/Packaging%20Debug%20and%20Release.html" />
 

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="总索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../using-dependencies/index.html" title="使用依赖项指南"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="../tutorial/Packaging%20Debug%20and%20Release.html" title="步骤12：打包调试和发布"
             accesskey="P">上一页</a> |</li>
  <li>
    <img src="../../_static/cmake-logo-16.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="https://cmake.org/">CMake</a> &#187;
  </li>
  <li>
    <a href="../../index.html">3.29.1-g21d0c57 Documentation</a> &#187;
  </li>

        <li class="nav-item nav-item-this"><a href="">用户交互指南</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="guide:用户交互指南">
<span id="id1"></span><h1><a class="toc-backref" href="#id19" role="doc-backlink">用户交互指南</a><a class="headerlink" href="#guide:用户交互指南" title="Link to this heading">¶</a></h1>
<nav class="contents" id="id2">
<p class="topic-title">目录</p>
<ul class="simple">
<li><p><a class="reference internal" href="#guide:用户交互指南" id="id19">用户交互指南</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id20">引言</a></p>
<ul>
<li><p><a class="reference internal" href="#cmake" id="id21">cmake命令行工具</a></p></li>
<li><p><a class="reference internal" href="#cmake-gui" id="id22">cmake-gui工具</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id4" id="id23">生成一个构建系统</a></p>
<ul>
<li><p><a class="reference internal" href="#id5" id="id24">命令行环境</a></p></li>
<li><p><a class="reference internal" href="#g" id="id25">命令行<code class="docutils literal notranslate"><span class="pre">-G</span></code>选项</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id26">在cmake-gui选择生成器</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#setting-build-variables" id="id27">设置构建变量</a></p>
<ul>
<li><p><a class="reference internal" href="#id8" id="id28">在命令行设置变量</a></p></li>
<li><p><a class="reference internal" href="#id9" id="id29">在cmake-gui设置变量</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id30">CMake缓存</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id11" id="id31">预设</a></p>
<ul>
<li><p><a class="reference internal" href="#id12" id="id32">在命令行使用预设</a></p></li>
<li><p><a class="reference internal" href="#id13" id="id33">在cmake-gui使用预设</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id14" id="id34">调用构建系统</a></p>
<ul>
<li><p><a class="reference internal" href="#id15" id="id35">选择一个目标</a></p></li>
<li><p><a class="reference internal" href="#id16" id="id36">指定一个构建程序</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id17" id="id37">软件安装</a></p></li>
<li><p><a class="reference internal" href="#id18" id="id38">运行测试</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="id3">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">引言</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h2>
<p>当软件包为基于CMake的构建系统提供了软件的源代码时，软件的消费者需要运行一个CMake用户交互工具来构建它。</p>
<p>行为良好的基于CMake的构建系统不会在源目录中创建任何输出，所以通常情况下，用户执行一个源外构建并在那里执行构建。首先，必须指示CMake生成一个合适的构建系统，然后用户调用构建工具来处理生成的构建系统。生成的构建系统是特定于用来生成它的机器的，并且是不可再分布的。提供的源软件包的每个消费者都需要使用CMake来生成特定于他们系统的构建系统。</p>
<p>生成的构建系统通常应该被视为只读的。作为主要构件的CMake文件应该完全指定构建系统，并且应该没有理由在IDE中手动填充属性，例如在生成构建系统之后。CMake会定期重写生成的构建系统，因此用户的修改会被覆盖。</p>
<p>通过提供CMake文件，本手册中描述的功能和用户界面可用于所有基于CMake的构建系统。</p>
<p>当处理提供的CMake文件时，CMake工具可能会向用户报告错误，比如报告编译器不受支持，或者编译器不支持必需的编译选项，或者无法找到依赖项。这些错误必须由用户通过选择不同的编译器、<span class="target" id="index-0-guide:使用依赖项指南"></span><a class="reference internal" href="../using-dependencies/index.html#guide:使用依赖项指南" title="使用依赖项指南"><code class="xref cmake cmake-guide docutils literal notranslate"><span class="pre">安装依赖</span></code></a>或指示CMake在哪里找到它们来解决。</p>
<section id="cmake">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">cmake命令行工具</a><a class="headerlink" href="#cmake" title="Link to this heading">¶</a></h3>
<p><span class="target" id="index-0-manual:cmake(1)"></span><a class="reference internal" href="../../manual/cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>的一个简单但典型的用法是创建一个build目录并在那里调用cmake：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>some_software-1.4.2
<span class="gp">$ </span>mkdir<span class="w"> </span>build
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>build
<span class="gp">$ </span>cmake<span class="w"> </span>..<span class="w"> </span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span>/opt/the/prefix
<span class="gp">$ </span>cmake<span class="w"> </span>--build<span class="w"> </span>.
<span class="gp">$ </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--target<span class="w"> </span>install
</pre></div>
</div>
<p>建议在到源的单独目录中构建，因为这样可以保持源目录的原始状态，允许使用多个工具链构建单个源，并允许通过简单地删除构建目录轻松地清除构建工件。</p>
<p>CMake工具可能会报告针对软件提供者的警告，而不是针对软件消费者的警告。此类警告以“此警告针对项目开发人员”结尾。用户可以通过向<span class="target" id="index-1-manual:cmake(1)"></span><a class="reference internal" href="../../manual/cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>传递<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-Wno-dev"><code class="xref std std-option docutils literal notranslate"><span class="pre">-Wno-dev</span></code></a>标志来禁用此类警告。</p>
</section>
<section id="cmake-gui">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">cmake-gui工具</a><a class="headerlink" href="#cmake-gui" title="Link to this heading">¶</a></h3>
<p>更习惯GUI界面的用户可以使用<span class="target" id="index-0-manual:cmake-gui(1)"></span><a class="reference internal" href="../../manual/cmake-gui.1.html#manual:cmake-gui(1)" title="cmake-gui(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake-gui(1)</span></code></a>工具来调用CMake并生成构建系统。</p>
<p>必须首先填充源目录和二进制目录。总是建议为源文件和构建文件使用不同的目录。</p>
<img alt="选择源码及二进制目录" src="../../_images/GUI-Source-Binary.png" />
</section>
</section>
<section id="id4">
<h2><a class="toc-backref" href="#id23" role="doc-backlink">生成一个构建系统</a><a class="headerlink" href="#id4" title="Link to this heading">¶</a></h2>
<p>有一些用户界面工具可以用来从CMake文件生成构建系统。<span class="target" id="index-0-manual:ccmake(1)"></span><a class="reference internal" href="../../manual/ccmake.1.html#manual:ccmake(1)" title="ccmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">ccmake(1)</span></code></a>和<span class="target" id="index-1-manual:cmake-gui(1)"></span><a class="reference internal" href="../../manual/cmake-gui.1.html#manual:cmake-gui(1)" title="cmake-gui(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake-gui(1)</span></code></a>工具通过设置各种必要的选项指导用户。可以调用<span class="target" id="index-2-manual:cmake(1)"></span><a class="reference internal" href="../../manual/cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>工具来在命令行上指定选项。本手册描述了可以使用任何用户界面工具设置的选项，尽管每种工具设置选项的方式不同。</p>
<section id="id5">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">命令行环境</a><a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<p>当使用命令行构建系统(如<code class="docutils literal notranslate"><span class="pre">Makefiles</span></code>或<code class="docutils literal notranslate"><span class="pre">Ninja</span></code>)调用<span class="target" id="index-3-manual:cmake(1)"></span><a class="reference internal" href="../../manual/cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>时，有必要使用正确的构建环境以确保构建工具可用。CMake必须能够根据需要找到合适的<span class="target" id="index-0-variable:CMAKE_MAKE_PROGRAM"></span><a class="reference internal" href="../../variable/CMAKE_MAKE_PROGRAM.html#variable:CMAKE_MAKE_PROGRAM" title="CMAKE_MAKE_PROGRAM"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">build</span> <span class="pre">tool</span></code></a>、编译器、链接器和其他必要工具。</p>
<p>在Linux系统上，适当的工具通常在系统范围内的位置提供，并且可以通过系统包管理器随时安装。用户提供的或安装在非默认位置的其他工具链也可以使用。</p>
<p>在交叉编译时，一些平台可能需要设置环境变量，或者可能提供设置环境的脚本。</p>
<p>Visual Studio提供了多个命令提示符和<code class="docutils literal notranslate"><span class="pre">vcvarsall.bat</span></code>脚本，用于为命令行构建系统设置正确的环境。虽然在使用Visual Studio生成器时并不一定需要使用相应的命令行环境，但这样做无坏处。</p>
<p>当使用Xcode时，可以安装多个Xcode版本。使用哪种方法可以有很多不同的选择，但最常见的方法是：</p>
<ul class="simple">
<li><p>在Xcode IDE的首选项中设置默认版本。</p></li>
<li><p>通过<code class="docutils literal notranslate"><span class="pre">xcode-select</span></code>命令行工具设置默认版本。</p></li>
<li><p>在运行CMake和构建工具时，通过设置<code class="docutils literal notranslate"><span class="pre">DEVELOPER_DIR</span></code>环境变量来覆盖默认版本。</p></li>
</ul>
<p>为了方便起见，<span class="target" id="index-2-manual:cmake-gui(1)"></span><a class="reference internal" href="../../manual/cmake-gui.1.html#manual:cmake-gui(1)" title="cmake-gui(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake-gui(1)</span></code></a>提供了一个环境变量编辑器。</p>
</section>
<section id="g">
<h3><a class="toc-backref" href="#id25" role="doc-backlink">命令行<code class="docutils literal notranslate"><span class="pre">-G</span></code>选项</a><a class="headerlink" href="#g" title="Link to this heading">¶</a></h3>
<p>CMake根据平台默认选择一个生成器。通常，默认生成器足以允许用户继续构建软件。</p>
<p>用户可以使用<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-G"><code class="xref std std-option docutils literal notranslate"><span class="pre">-G</span></code></a>选项覆盖默认生成器：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span>Ninja
</pre></div>
</div>
<p><a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-h"><code class="xref std std-option docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--help</span></code></a>的输出包括一个可供用户选择的<span class="target" id="index-0-manual:cmake-generators(7)"></span><a class="reference internal" href="../../manual/cmake-generators.7.html#manual:cmake-generators(7)" title="cmake-generators(7)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">生成器</span></code></a>列表。注意，生成器名称是区分大小写的。</p>
<p>在类Unix系统（包括Mac OS X）上，默认情况下使用<span class="target" id="index-0-generator:Unix Makefiles"></span><a class="reference internal" href="../../generator/Unix%20Makefiles.html#generator:Unix Makefiles" title="Unix Makefiles"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">Unix</span> <span class="pre">Makefiles</span></code></a>生成器。该生成器的一个变体也可以在各种环境的Windows上使用，比如<span class="target" id="index-0-generator:NMake Makefiles"></span><a class="reference internal" href="../../generator/NMake%20Makefiles.html#generator:NMake Makefiles" title="NMake Makefiles"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">NMake</span> <span class="pre">Makefiles</span></code></a>和<span class="target" id="index-0-generator:MinGW Makefiles"></span><a class="reference internal" href="../../generator/MinGW%20Makefiles.html#generator:MinGW Makefiles" title="MinGW Makefiles"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">MinGW</span> <span class="pre">Makefiles</span></code></a>生成器。这些生成器生成一个<code class="docutils literal notranslate"><span class="pre">Makefile</span></code>变体，可以用<code class="docutils literal notranslate"><span class="pre">make</span></code>、<code class="docutils literal notranslate"><span class="pre">gmake</span></code>、<code class="docutils literal notranslate"><span class="pre">nmake</span></code>或类似工具执行。有关目标环境和工具的更多信息，请参见单个生成器文档。</p>
<p><span class="target" id="index-0-generator:Ninja"></span><a class="reference internal" href="../../generator/Ninja.html#generator:Ninja" title="Ninja"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">Ninja</span></code></a>生成器适用于所有主要平台。<code class="docutils literal notranslate"><span class="pre">ninja</span></code>是一个用法类似于<code class="docutils literal notranslate"><span class="pre">make</span></code>的构建工具，但侧重于性能和效率。</p>
<p>在Windows平台上，可以使用<span class="target" id="index-4-manual:cmake(1)"></span><a class="reference internal" href="../../manual/cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>为Visual Studio IDE生成解决方案。Visual Studio版本可以通过IDE的产品名来指定，其中包含一个四位数字的年份。别名也可以用来表示Visual Studio版本，比如两个数字对应于VisualC++编译器的产品版本，或者两者的组合：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Visual Studio 2019&quot;</span>
<span class="gp">$ </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Visual Studio 16&quot;</span>
<span class="gp">$ </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Visual Studio 16 2019&quot;</span>
</pre></div>
</div>
<p>Visual Studio生成器可以针对不同的体系结构。可以使用<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-A"><code class="xref std std-option docutils literal notranslate"><span class="pre">-A</span></code></a>选项指定目标架构：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cmake .. -G &quot;Visual Studio 2019&quot; -A x64</span>
<span class="go">cmake .. -G &quot;Visual Studio 16&quot; -A ARM</span>
<span class="go">cmake .. -G &quot;Visual Studio 16 2019&quot; -A ARM64</span>
</pre></div>
</div>
<p>在苹果平台上，<span class="target" id="index-0-generator:Xcode"></span><a class="reference internal" href="../../generator/Xcode.html#generator:Xcode" title="Xcode"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">Xcode</span></code></a>生成器可能被用来为Xcode IDE生成项目文件。</p>
<p>一些IDE，如KDevelop4, QtCreator和CLion，对基于CMake的构建系统有本地支持。这些IDE提供了选择要使用的底层生成器的用户界面，通常是在<code class="docutils literal notranslate"><span class="pre">Makefile</span></code>或基于<code class="docutils literal notranslate"><span class="pre">Ninja</span></code>的生成器之间进行选择。</p>
<p>请注意，在第一次调用CMake之后，不可能再使用<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-G"><code class="xref std std-option docutils literal notranslate"><span class="pre">-G</span></code></a>更改生成器。要更改生成器，必须先删除生成目录，并且必须从头开始生成。</p>
<p>当生成Visual Studio项目和解决方案文件时，在最初运行<span class="target" id="index-5-manual:cmake(1)"></span><a class="reference internal" href="../../manual/cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>时，可以使用其他几个选项。</p>
<p>Visual Studio工具集可以通过<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-T"><code class="xref std std-option docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">-T</span></code></a>选项指定：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="c1"># Build with the clang-cl toolset</span>
<span class="gp">$ </span>cmake.exe<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Visual Studio 16 2019&quot;</span><span class="w"> </span>-A<span class="w"> </span>x64<span class="w"> </span>-T<span class="w"> </span>ClangCL
<span class="gp">$ </span><span class="c1"># Build targeting Windows XP</span>
<span class="gp">$ </span>cmake.exe<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Visual Studio 16 2019&quot;</span><span class="w"> </span>-A<span class="w"> </span>x64<span class="w"> </span>-T<span class="w"> </span>v120_xp
</pre></div>
</div>
<p>虽然<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-A"><code class="xref std std-option docutils literal notranslate"><span class="pre">-A</span></code></a>选项指定_target_体系结构，但<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-T"><code class="xref std std-option docutils literal notranslate"><span class="pre">-T</span></code></a>选项可用于指定所使用的工具链的详细信息。例如，<code class="docutils literal notranslate"><span class="pre">-Thost=x64</span></code>可用于选择64位版本的主机工具。下面演示如何使用64位工具，以及如何构建64位目标体系结构:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Visual Studio 16 2019&quot;</span><span class="w"> </span>-A<span class="w"> </span>x64<span class="w"> </span>-Thost<span class="o">=</span>x64
</pre></div>
</div>
</section>
<section id="id6">
<h3><a class="toc-backref" href="#id26" role="doc-backlink">在cmake-gui选择生成器</a><a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<p>“Configure”按钮会触发一个新的对话框来选择要使用的CMake生成器。</p>
<img alt="配置一个生成器" src="../../_images/GUI-Configure-Dialog.png" />
<p>命令行中可用的所有生成器在<span class="target" id="index-3-manual:cmake-gui(1)"></span><a class="reference internal" href="../../manual/cmake-gui.1.html#manual:cmake-gui(1)" title="cmake-gui(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake-gui(1)</span></code></a>中也可用。</p>
<img alt="选择一个生成器" src="../../_images/GUI-Choose-Generator.png" />
<p>当选择生成器时，可以使用更多选项来设置要生成的体系结构。</p>
<img alt="选择Visual Studio生成器的体系结构" src="../../_images/VS-Choose-Arch.png" />
</section>
</section>
<section id="setting-build-variables">
<span id="id7"></span><h2><a class="toc-backref" href="#id27" role="doc-backlink">设置构建变量</a><a class="headerlink" href="#setting-build-variables" title="Link to this heading">¶</a></h2>
<p>软件项目在调用CMake时通常需要在命令行上设置变量。下表列出了一些最常用的CMake变量：</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>变量</p></th>
<th class="head"><p>意义</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="target" id="index-0-variable:CMAKE_PREFIX_PATH"></span><a class="reference internal" href="../../variable/CMAKE_PREFIX_PATH.html#variable:CMAKE_PREFIX_PATH" title="CMAKE_PREFIX_PATH"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_PREFIX_PATH</span></code></a></p></td>
<td><p><span class="target" id="index-1-guide:使用依赖项指南"></span><a class="reference internal" href="../using-dependencies/index.html#guide:使用依赖项指南" title="使用依赖项指南"><code class="xref cmake cmake-guide docutils literal notranslate"><span class="pre">依赖包</span></code></a>搜索路径</p></td>
</tr>
<tr class="row-odd"><td><p><span class="target" id="index-0-variable:CMAKE_MODULE_PATH"></span><a class="reference internal" href="../../variable/CMAKE_MODULE_PATH.html#variable:CMAKE_MODULE_PATH" title="CMAKE_MODULE_PATH"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_MODULE_PATH</span></code></a></p></td>
<td><p>额外的CMake模块搜索路径</p></td>
</tr>
<tr class="row-even"><td><p><span class="target" id="index-0-variable:CMAKE_BUILD_TYPE"></span><a class="reference internal" href="../../variable/CMAKE_BUILD_TYPE.html#variable:CMAKE_BUILD_TYPE" title="CMAKE_BUILD_TYPE"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code></a></p></td>
<td><p>构建配置，如<code class="docutils literal notranslate"><span class="pre">Debug</span></code>或<code class="docutils literal notranslate"><span class="pre">Release</span></code>确定调试/优化标志。这只与单配置构建系统相关，比如<code class="docutils literal notranslate"><span class="pre">Makefile</span></code>和<code class="docutils literal notranslate"><span class="pre">Ninja</span></code>。Visual Studio和Xcode等多配置构建系统忽略了这个设置。</p></td>
</tr>
<tr class="row-odd"><td><p><span class="target" id="index-0-variable:CMAKE_INSTALL_PREFIX"></span><a class="reference internal" href="../../variable/CMAKE_INSTALL_PREFIX.html#variable:CMAKE_INSTALL_PREFIX" title="CMAKE_INSTALL_PREFIX"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code></a></p></td>
<td><p>使用<code class="docutils literal notranslate"><span class="pre">install</span></code>构建目标安装软件的位置</p></td>
</tr>
<tr class="row-even"><td><p><span class="target" id="index-0-variable:CMAKE_TOOLCHAIN_FILE"></span><a class="reference internal" href="../../variable/CMAKE_TOOLCHAIN_FILE.html#variable:CMAKE_TOOLCHAIN_FILE" title="CMAKE_TOOLCHAIN_FILE"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_TOOLCHAIN_FILE</span></code></a></p></td>
<td><p>包含交叉编译数据的文件，例如<span class="target" id="index-0-manual:cmake-toolchains(7)"></span><a class="reference internal" href="../../manual/cmake-toolchains.7.html#manual:cmake-toolchains(7)" title="cmake-toolchains(7)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">toolchains</span> <span class="pre">and</span> <span class="pre">sysroots</span></code></a>。</p></td>
</tr>
<tr class="row-odd"><td><p><span class="target" id="index-0-variable:BUILD_SHARED_LIBS"></span><a class="reference internal" href="../../variable/BUILD_SHARED_LIBS.html#variable:BUILD_SHARED_LIBS" title="BUILD_SHARED_LIBS"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">BUILD_SHARED_LIBS</span></code></a></p></td>
<td><p>是否为未指定类型的<span class="target" id="index-0-command:add_library"></span><a class="reference internal" href="../../command/add_library.html#command:add_library" title="add_library"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">add_library()</span></code></a>命令构建共享库而非静态库</p></td>
</tr>
<tr class="row-even"><td><p><span class="target" id="index-0-variable:CMAKE_EXPORT_COMPILE_COMMANDS"></span><a class="reference internal" href="../../variable/CMAKE_EXPORT_COMPILE_COMMANDS.html#variable:CMAKE_EXPORT_COMPILE_COMMANDS" title="CMAKE_EXPORT_COMPILE_COMMANDS"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_EXPORT_COMPILE_COMMANDS</span></code></a></p></td>
<td><p>使用基于clang的工具生成一个 <code class="docutils literal notranslate"><span class="pre">compile_commands.json</span></code> 文件</p></td>
</tr>
</tbody>
</table>
<p>其他特定于项目的变量可以用于控制构建，例如启用或禁用项目的组件。</p>
<p>对于这些变量如何在不同的构建系统之间命名，CMake没有约定，除了前缀为<code class="docutils literal notranslate"><span class="pre">CMAKE_</span></code>的变量通常引用CMake本身提供的选项，不应该在第三方选项中使用，第三方选项应该使用自己的前缀。<span class="target" id="index-4-manual:cmake-gui(1)"></span><a class="reference internal" href="../../manual/cmake-gui.1.html#manual:cmake-gui(1)" title="cmake-gui(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake-gui(1)</span></code></a>工具可以显示由前缀定义的组中的选项，因此第三方确保使用自一致的前缀是有意义的。</p>
<section id="id8">
<h3><a class="toc-backref" href="#id28" role="doc-backlink">在命令行设置变量</a><a class="headerlink" href="#id8" title="Link to this heading">¶</a></h3>
<p>CMake变量可以在创建初始构建时在命令行中设置：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mkdir<span class="w"> </span>build
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>build
<span class="gp">$ </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span>Ninja<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Debug
</pre></div>
</div>
<p>或者稍后调用<span class="target" id="index-6-manual:cmake(1)"></span><a class="reference internal" href="../../manual/cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>build
<span class="gp">$ </span>cmake<span class="w"> </span>.<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Debug
</pre></div>
</div>
<p><a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-U"><code class="xref std std-option docutils literal notranslate"><span class="pre">-U</span></code></a>标志可以用来取消<span class="target" id="index-7-manual:cmake(1)"></span><a class="reference internal" href="../../manual/cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>命令行的变量设置：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>build
<span class="gp">$ </span>cmake<span class="w"> </span>.<span class="w"> </span>-UMyPackage_DIR
</pre></div>
</div>
<p>最初在命令行上创建的CMake构建系统可以使用<span class="target" id="index-5-manual:cmake-gui(1)"></span><a class="reference internal" href="../../manual/cmake-gui.1.html#manual:cmake-gui(1)" title="cmake-gui(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake-gui(1)</span></code></a>进行修改，反之亦然。</p>
<p><span class="target" id="index-8-manual:cmake(1)"></span><a class="reference internal" href="../../manual/cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>工具允许使用<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-C"><code class="xref std std-option docutils literal notranslate"><span class="pre">-C</span></code></a>选项指定用于填充初始缓存的文件。这对于简化重复需要相同缓存项的命令和脚本非常有用。</p>
</section>
<section id="id9">
<h3><a class="toc-backref" href="#id29" role="doc-backlink">在cmake-gui设置变量</a><a class="headerlink" href="#id9" title="Link to this heading">¶</a></h3>
<p>变量可以在cmake-gui中使用“Add Entry”按钮进行设置。这会触发一个新的对话框来设置变量的值。</p>
<img alt="编辑一个缓存项" src="../../_images/GUI-Add-Entry.png" />
<p><span class="target" id="index-6-manual:cmake-gui(1)"></span><a class="reference internal" href="../../manual/cmake-gui.1.html#manual:cmake-gui(1)" title="cmake-gui(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake-gui(1)</span></code></a>用户界面的主视图可以用来编辑现有的变量。</p>
</section>
<section id="id10">
<h3><a class="toc-backref" href="#id30" role="doc-backlink">CMake缓存</a><a class="headerlink" href="#id10" title="Link to this heading">¶</a></h3>
<p>当CMake执行时，它需要找到编译器、工具和依赖项的位置。它还需要能够一致地重新生成构建系统，以使用相同的编译/链接标志和依赖项路径。用户还需要配置这些参数，因为它们是特定于用户系统的路径和选项。</p>
<p>当它第一次被执行时，CMake会在构建目录中生成一个<code class="docutils literal notranslate"><span class="pre">CMakeCache.txt</span></code>文件，其中包含此类工件的键值对。用户可以通过运行<span class="target" id="index-7-manual:cmake-gui(1)"></span><a class="reference internal" href="../../manual/cmake-gui.1.html#manual:cmake-gui(1)" title="cmake-gui(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake-gui(1)</span></code></a>或<span class="target" id="index-1-manual:ccmake(1)"></span><a class="reference internal" href="../../manual/ccmake.1.html#manual:ccmake(1)" title="ccmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">ccmake(1)</span></code></a>工具查看或编辑缓存文件。这些工具提供了一个交互界面，用于重新配置所提供的软件并重新生成构建系统，这是在编辑缓存值之后所需要的。每个缓存条目可能都有一个相关的简短帮助文本，显示在用户界面工具中。</p>
<p>缓存项也可以有一种类型来表示它应该如何在用户界面中显示。例如，<code class="docutils literal notranslate"><span class="pre">BOOL</span></code>类型的缓存条目可以通过用户界面中的复选框进行编辑，<code class="docutils literal notranslate"><span class="pre">STRING</span></code>可以在文本字段中进行编辑，而与<code class="docutils literal notranslate"><span class="pre">STRING</span></code>类似的<code class="docutils literal notranslate"><span class="pre">FILEPATH</span></code>也应该提供一种使用文件对话框定位文件系统路径的方法。一个<code class="docutils literal notranslate"><span class="pre">STRING</span></code>类型的条目可以提供一个允许值的限制列表，然后在<span class="target" id="index-8-manual:cmake-gui(1)"></span><a class="reference internal" href="../../manual/cmake-gui.1.html#manual:cmake-gui(1)" title="cmake-gui(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake-gui(1)</span></code></a>用户界面的下拉菜单中提供(参见<span class="target" id="index-0-prop_cache:STRINGS"></span><a class="reference internal" href="../../prop_cache/STRINGS.html#prop_cache:STRINGS" title="STRINGS"><code class="xref cmake cmake-prop_cache docutils literal notranslate"><span class="pre">STRINGS</span></code></a>缓存属性)。</p>
<p>软件包附带的CMake文件也可以使用<span class="target" id="index-0-command:option"></span><a class="reference internal" href="../../command/option.html#command:option" title="option"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">option()</span></code></a>命令定义布尔切换选项。该命令创建一个缓存条目，该条目具有帮助文本和默认值。这类缓存条目通常特定于所提供的软件，并影响构建的配置，例如是否构建测试和示例，是否启用异常构建等。</p>
</section>
</section>
<section id="id11">
<h2><a class="toc-backref" href="#id31" role="doc-backlink">预设</a><a class="headerlink" href="#id11" title="Link to this heading">¶</a></h2>
<p>CMake理解一个文件，<code class="docutils literal notranslate"><span class="pre">CMakePresets.json</span></code>，以及它的用户特定对等体<code class="docutils literal notranslate"><span class="pre">CMakeUserPresets.json</span></code>，用于保存常用配置设置的预设。这些预设可以设置构建目录、生成器、缓存变量、环境变量和其他命令行选项。所有这些选项都可以被用户覆盖。<code class="docutils literal notranslate"><span class="pre">CMakePresets.json</span></code>格式的详细信息在<span class="target" id="index-0-manual:cmake-presets(7)"></span><a class="reference internal" href="../../manual/cmake-presets.7.html#manual:cmake-presets(7)" title="cmake-presets(7)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake-presets(7)</span></code></a>手册中列出。</p>
<section id="id12">
<h3><a class="toc-backref" href="#id32" role="doc-backlink">在命令行使用预设</a><a class="headerlink" href="#id12" title="Link to this heading">¶</a></h3>
<p>当使用<span class="target" id="index-9-manual:cmake(1)"></span><a class="reference internal" href="../../manual/cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>命令行工具时，可以使用<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-preset"><code class="xref std std-option docutils literal notranslate"><span class="pre">--preset</span></code></a>选项来调用预设。如果指定了<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-preset"><code class="xref std std-option docutils literal notranslate"><span class="pre">--preset</span></code></a>，则不需要生成器和生成目录，但可以指定重写它们。例如，如果你有以下<code class="docutils literal notranslate"><span class="pre">CMakePresets.json</span></code>文件：</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;configurePresets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ninja-release&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;binaryDir&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${sourceDir}/build/${presetName}&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;generator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ninja&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;cacheVariables&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;CMAKE_BUILD_TYPE&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Release&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>然后运行以下命令:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cmake -S /path/to/source --preset=ninja-release</span>
</pre></div>
</div>
<p>这将使用<span class="target" id="index-1-generator:Ninja"></span><a class="reference internal" href="../../generator/Ninja.html#generator:Ninja" title="Ninja"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">Ninja</span></code></a>生成器在<code class="docutils literal notranslate"><span class="pre">/path/to/source/build/ninja-release</span></code>中生成一个构建目录，并将<span class="target" id="index-1-variable:CMAKE_BUILD_TYPE"></span><a class="reference internal" href="../../variable/CMAKE_BUILD_TYPE.html#variable:CMAKE_BUILD_TYPE" title="CMAKE_BUILD_TYPE"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code></a>设置为<code class="docutils literal notranslate"><span class="pre">Release</span></code>。</p>
<p>如果你想查看可用预设的列表，你可以运行:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cmake -S /path/to/source --list-presets</span>
</pre></div>
</div>
<p>这将列出<code class="docutils literal notranslate"><span class="pre">/path/to/source/CMakePresets.json</span></code>及<code class="docutils literal notranslate"><span class="pre">/path/to/source/CMakeUsersPresets.json</span></code>中可用的预设，而不是生成构建树。</p>
</section>
<section id="id13">
<h3><a class="toc-backref" href="#id33" role="doc-backlink">在cmake-gui使用预设</a><a class="headerlink" href="#id13" title="Link to this heading">¶</a></h3>
<p>如果一个项目有可用的预设，包括<code class="docutils literal notranslate"><span class="pre">CMakePresets.json</span></code>或<code class="docutils literal notranslate"><span class="pre">CMakeUserPresets.json</span></code>，预设列表将出现在 <span class="target" id="index-9-manual:cmake-gui(1)"></span><a class="reference internal" href="../../manual/cmake-gui.1.html#manual:cmake-gui(1)" title="cmake-gui(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake-gui(1)</span></code></a>的下拉菜单中，在源目录和二进制目录之间。选择预置会设置二进制目录、生成器、环境变量和缓存变量，但是在选择预置之后，可以覆盖所有这些选项。</p>
</section>
</section>
<section id="id14">
<h2><a class="toc-backref" href="#id34" role="doc-backlink">调用构建系统</a><a class="headerlink" href="#id14" title="Link to this heading">¶</a></h2>
<p>生成构建系统之后，可以通过调用特定的构建工具来构建软件。在IDE生成器的情况下，这可能涉及将生成的项目文件加载到IDE中以调用构建。</p>
<p>CMake知道调用构建所需的特定构建工具，所以一般来说，要在生成后从命令行构建构建系统或项目，可以在构建目录中调用以下命令：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake<span class="w"> </span>--build<span class="w"> </span>.
</pre></div>
</div>
<p><a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-build"><code class="xref std std-option docutils literal notranslate"><span class="pre">--build</span></code></a>标志为<span class="target" id="index-10-manual:cmake(1)"></span><a class="reference internal" href="../../manual/cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>工具启用了一种特定的操作模式。它调用与<span class="target" id="index-1-manual:cmake-generators(7)"></span><a class="reference internal" href="../../manual/cmake-generators.7.html#manual:cmake-generators(7)" title="cmake-generators(7)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">生成器</span></code></a>相关联的<span class="target" id="index-1-variable:CMAKE_MAKE_PROGRAM"></span><a class="reference internal" href="../../variable/CMAKE_MAKE_PROGRAM.html#variable:CMAKE_MAKE_PROGRAM" title="CMAKE_MAKE_PROGRAM"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_MAKE_PROGRAM</span></code></a>命令，或者调用用户配置的构建工具。</p>
<p><a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-build"><code class="xref std std-option docutils literal notranslate"><span class="pre">--build</span></code></a>模式还接受参数<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-build-t"><code class="xref std std-option docutils literal notranslate"><span class="pre">--target</span></code></a>来指定要构建的特定目标，例如特定的库、可执行文件或自定义目标，或者特定的特殊目标，如<code class="docutils literal notranslate"><span class="pre">install</span></code>：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--target<span class="w"> </span>myexe
</pre></div>
</div>
<p>在多配置生成器的情况下，<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-build"><code class="xref std std-option docutils literal notranslate"><span class="pre">--build</span></code></a>模式还接受<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-build-config"><code class="xref std std-option docutils literal notranslate"><span class="pre">--config</span></code></a>参数来指定要构建的特定配置：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--target<span class="w"> </span>myexe<span class="w"> </span>--config<span class="w"> </span>Release
</pre></div>
</div>
<p>如果生成器在使用<span class="target" id="index-2-variable:CMAKE_BUILD_TYPE"></span><a class="reference internal" href="../../variable/CMAKE_BUILD_TYPE.html#variable:CMAKE_BUILD_TYPE" title="CMAKE_BUILD_TYPE"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code></a>变量调用cmake时生成特定于配置的构建系统，则<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-build-config"><code class="xref std std-option docutils literal notranslate"><span class="pre">--config</span></code></a>选项无效。</p>
<p>一些构建系统省略了构建期间调用的命令行细节。<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-build-v"><code class="xref std std-option docutils literal notranslate"><span class="pre">--verbose</span></code></a>标志可用于显示这些命令行：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--target<span class="w"> </span>myexe<span class="w"> </span>--verbose
</pre></div>
</div>
<p><a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-build"><code class="xref std std-option docutils literal notranslate"><span class="pre">--build</span></code></a>模式还可以通过在<code class="docutils literal notranslate"><span class="pre">--</span></code>之后列出特定的命令行选项，将它们传递给底层的构建工具。这对于为构建工具指定选项非常有用，例如在任务失败后继续构建，当CMake不提供高级用户界面时。</p>
<p>对于所有生成器，在调用CMake之后都可以运行底层构建工具。例如，<code class="docutils literal notranslate"><span class="pre">make</span></code>可能在使用<span class="target" id="index-1-generator:Unix Makefiles"></span><a class="reference internal" href="../../generator/Unix%20Makefiles.html#generator:Unix Makefiles" title="Unix Makefiles"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">Unix</span> <span class="pre">Makefiles</span></code></a>生成器生成后执行，以调用构建，或者<code class="docutils literal notranslate"><span class="pre">ninja</span></code>在使用<span class="target" id="index-2-generator:Ninja"></span><a class="reference internal" href="../../generator/Ninja.html#generator:Ninja" title="Ninja"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">Ninja</span></code></a>生成器生成后执行。IDE构建系统通常为构建项目提供命令行工具，该项目也可以被调用。</p>
<section id="id15">
<h3><a class="toc-backref" href="#id35" role="doc-backlink">选择一个目标</a><a class="headerlink" href="#id15" title="Link to this heading">¶</a></h3>
<p>CMake文件中描述的每个可执行文件和库都是一个构建目标，构建系统可以描述定制的目标，要么供内部使用，要么供用户使用，例如用于创建文档。</p>
<p>CMake为提供CMake文件的所有构建系统提供了一些内置目标。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">all</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">Makefile</span></code>和<code class="docutils literal notranslate"><span class="pre">Ninja</span></code>生成器使用的默认目标。构建构建系统中的所有目标，除了那些被它们的<span class="target" id="index-0-prop_tgt:EXCLUDE_FROM_ALL"></span><a class="reference internal" href="../../prop_tgt/EXCLUDE_FROM_ALL.html#prop_tgt:EXCLUDE_FROM_ALL" title="EXCLUDE_FROM_ALL"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">EXCLUDE_FROM_ALL</span></code></a>目标属性或<span class="target" id="index-0-prop_dir:EXCLUDE_FROM_ALL"></span><a class="reference internal" href="../../prop_dir/EXCLUDE_FROM_ALL.html#prop_dir:EXCLUDE_FROM_ALL" title="EXCLUDE_FROM_ALL"><code class="xref cmake cmake-prop_dir docutils literal notranslate"><span class="pre">EXCLUDE_FROM_ALL</span></code></a>目录属性排除的目标。名称<code class="docutils literal notranslate"><span class="pre">ALL_BUILD</span></code>用于Xcode和Visual Studio生成器。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">help</span></code></dt><dd><p>列出可用于生成的目标。当使用<span class="target" id="index-2-generator:Unix Makefiles"></span><a class="reference internal" href="../../generator/Unix%20Makefiles.html#generator:Unix Makefiles" title="Unix Makefiles"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">Unix</span> <span class="pre">Makefiles</span></code></a>或<span class="target" id="index-3-generator:Ninja"></span><a class="reference internal" href="../../generator/Ninja.html#generator:Ninja" title="Ninja"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">Ninja</span></code></a>生成器时，可以使用此目标，并且确切的输出是特定于工具的。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">clean</span></code></dt><dd><p>删除已构建的目标文件和其他输出文件。基于<code class="docutils literal notranslate"><span class="pre">Makefile</span></code>的生成器为每个目录创建一个<code class="docutils literal notranslate"><span class="pre">clean</span></code>目标，以便可以清理单个目录。<code class="docutils literal notranslate"><span class="pre">Ninja</span></code>工具提供了自己的颗粒<code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">clean</span></code>系统。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">test</span></code></dt><dd><p>运行测试。只有在CMake文件提供基于CTest的测试时，此目标才自动可用。请参见<a class="reference internal" href="#id18">运行测试</a>。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">install</span></code></dt><dd><p>安装软件。这个目标只有在软件使用<span class="target" id="index-0-command:install"></span><a class="reference internal" href="../../command/install.html#command:install" title="install"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">install()</span></code></a>命令定义安装规则时才自动可用。请参见<a class="reference internal" href="#id17">软件安装</a>。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">package</span></code></dt><dd><p>创建一个二进制包。这个目标只有在CMake文件提供基于CPack的包时才自动可用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">package_source</span></code></dt><dd><p>创建源包。这个目标只有在CMake文件提供基于CPack的包时才自动可用。</p>
</dd>
</dl>
<p>对于基于<code class="docutils literal notranslate"><span class="pre">Makefile</span></code>的系统，提供了二进制构建目标的<code class="docutils literal notranslate"><span class="pre">/fast</span></code>变体。<code class="docutils literal notranslate"><span class="pre">/fast</span></code>变体用于构建指定的目标，而不考虑其依赖关系。不检查依赖项，如果过期也不会重新生成依赖项。<span class="target" id="index-4-generator:Ninja"></span><a class="reference internal" href="../../generator/Ninja.html#generator:Ninja" title="Ninja"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">Ninja</span></code></a>生成器在检查依赖项时速度足够快，以确保没有为该生成器提供此类目标。</p>
<p>基于<code class="docutils literal notranslate"><span class="pre">Makefile</span></code>的系统还提供构建目标来预处理、组装和编译特定目录中的单个文件。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make<span class="w"> </span>foo.cpp.i
<span class="gp">$ </span>make<span class="w"> </span>foo.cpp.s
<span class="gp">$ </span>make<span class="w"> </span>foo.cpp.o
</pre></div>
</div>
<p>文件扩展名内置到目标名称中，因为可能存在另一个具有相同名称但扩展名不同的文件。但是，还提供了没有文件扩展名的构建目标。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make<span class="w"> </span>foo.i
<span class="gp">$ </span>make<span class="w"> </span>foo.s
<span class="gp">$ </span>make<span class="w"> </span>foo.o
</pre></div>
</div>
<p>在包含<code class="docutils literal notranslate"><span class="pre">foo.c</span></code>和<code class="docutils literal notranslate"><span class="pre">foo.cpp</span></code>的构建系统中，构建<code class="docutils literal notranslate"><span class="pre">foo.i</span></code>将预处理这两个文件。</p>
</section>
<section id="id16">
<h3><a class="toc-backref" href="#id36" role="doc-backlink">指定一个构建程序</a><a class="headerlink" href="#id16" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-build"><code class="xref std std-option docutils literal notranslate"><span class="pre">--build</span></code></a>模式调用的程序由<span class="target" id="index-2-variable:CMAKE_MAKE_PROGRAM"></span><a class="reference internal" href="../../variable/CMAKE_MAKE_PROGRAM.html#variable:CMAKE_MAKE_PROGRAM" title="CMAKE_MAKE_PROGRAM"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_MAKE_PROGRAM</span></code></a>变量决定。对于大多数生成器，不需要配置特定的程序。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>生成器</p></th>
<th class="head"><p>默认构建程序</p></th>
<th class="head"><p>其他替代</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>XCode</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">xcodebuild</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Unix Makefiles</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">make</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>NMake Makefiles</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nmake</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">jom</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>NMake Makefiles JOM</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">jom</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nmake</span></code></p></td>
</tr>
<tr class="row-even"><td><p>MinGW Makefiles</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">mingw32-make</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>MSYS Makefiles</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">make</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Ninja</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ninja</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Visual Studio</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">msbuild</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Watcom WMake</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">wmake</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">jom</span></code>工具能够读取<code class="docutils literal notranslate"><span class="pre">NMake</span></code>风格的makefile并并行构建，而<code class="docutils literal notranslate"><span class="pre">nmake</span></code>工具总是串行构建。在使用<span class="target" id="index-1-generator:NMake Makefiles"></span><a class="reference internal" href="../../generator/NMake%20Makefiles.html#generator:NMake Makefiles" title="NMake Makefiles"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">NMake</span> <span class="pre">Makefiles</span></code></a>生成器生成后，用户可以运行<code class="docutils literal notranslate"><span class="pre">jom</span></code>而不是<code class="docutils literal notranslate"><span class="pre">nmake</span></code>。在使用<span class="target" id="index-2-generator:NMake Makefiles"></span><a class="reference internal" href="../../generator/NMake%20Makefiles.html#generator:NMake Makefiles" title="NMake Makefiles"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">NMake</span> <span class="pre">Makefiles</span></code></a>生成器时，如果<span class="target" id="index-3-variable:CMAKE_MAKE_PROGRAM"></span><a class="reference internal" href="../../variable/CMAKE_MAKE_PROGRAM.html#variable:CMAKE_MAKE_PROGRAM" title="CMAKE_MAKE_PROGRAM"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_MAKE_PROGRAM</span></code></a>被设置为<code class="docutils literal notranslate"><span class="pre">jom</span></code>，<a class="reference internal" href="../../manual/cmake.1.html#cmdoption-cmake-build"><code class="xref std std-option docutils literal notranslate"><span class="pre">--build</span></code></a>模式也会使用<code class="docutils literal notranslate"><span class="pre">jom</span></code>，为了方便起见，提供了<span class="target" id="index-0-generator:NMake Makefiles JOM"></span><a class="reference internal" href="../../generator/NMake%20Makefiles%20JOM.html#generator:NMake Makefiles JOM" title="NMake Makefiles JOM"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">NMake</span> <span class="pre">Makefiles</span> <span class="pre">JOM</span></code></a>生成器以正常的方式找到<code class="docutils literal notranslate"><span class="pre">jom</span></code>并将其用作<span class="target" id="index-4-variable:CMAKE_MAKE_PROGRAM"></span><a class="reference internal" href="../../variable/CMAKE_MAKE_PROGRAM.html#variable:CMAKE_MAKE_PROGRAM" title="CMAKE_MAKE_PROGRAM"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_MAKE_PROGRAM</span></code></a>。为了完整起见，<code class="docutils literal notranslate"><span class="pre">nmake</span></code>是一个替代工具，它可以处理<span class="target" id="index-1-generator:NMake Makefiles JOM"></span><a class="reference internal" href="../../generator/NMake%20Makefiles%20JOM.html#generator:NMake Makefiles JOM" title="NMake Makefiles JOM"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">NMake</span> <span class="pre">Makefiles</span> <span class="pre">JOM</span></code></a>生成器的输出，但这样做将是一种悲观。</p>
</section>
</section>
<section id="id17">
<h2><a class="toc-backref" href="#id37" role="doc-backlink">软件安装</a><a class="headerlink" href="#id17" title="Link to this heading">¶</a></h2>
<p>可以在CMake缓存中设置<span class="target" id="index-1-variable:CMAKE_INSTALL_PREFIX"></span><a class="reference internal" href="../../variable/CMAKE_INSTALL_PREFIX.html#variable:CMAKE_INSTALL_PREFIX" title="CMAKE_INSTALL_PREFIX"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code></a>变量，以指定在何处安装所提供的软件。如果提供的软件具有使用<span class="target" id="index-1-command:install"></span><a class="reference internal" href="../../command/install.html#command:install" title="install"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">install()</span></code></a>命令指定的安装规则，它们将把工件安装到该前缀中。在Windows上，默认安装位置对应于<code class="docutils literal notranslate"><span class="pre">ProgramFiles</span></code>系统目录，该目录可能是特定于体系结构的。在Unix主机上，<code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>是默认的安装位置。</p>
<p><span class="target" id="index-2-variable:CMAKE_INSTALL_PREFIX"></span><a class="reference internal" href="../../variable/CMAKE_INSTALL_PREFIX.html#variable:CMAKE_INSTALL_PREFIX" title="CMAKE_INSTALL_PREFIX"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code></a>变量总是指向目标文件系统上的安装前缀。</p>
<p>在交叉编译或打包的场景中，sysroot是只读的，或者sysroot应该保持原始状态，可以将<span class="target" id="index-0-variable:CMAKE_STAGING_PREFIX"></span><a class="reference internal" href="../../variable/CMAKE_STAGING_PREFIX.html#variable:CMAKE_STAGING_PREFIX" title="CMAKE_STAGING_PREFIX"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_STAGING_PREFIX</span></code></a>变量设置为实际安装文件的位置。</p>
<p>这些命令：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake<span class="w"> </span>..<span class="w"> </span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span>/usr/local<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-DCMAKE_SYSROOT<span class="o">=</span><span class="nv">$HOME</span>/root<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-DCMAKE_STAGING_PREFIX<span class="o">=</span>/tmp/package
<span class="gp">$ </span>cmake<span class="w"> </span>--build<span class="w"> </span>.
<span class="gp">$ </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--target<span class="w"> </span>install
</pre></div>
</div>
<p>导致文件被安装到机器的<code class="docutils literal notranslate"><span class="pre">/tmp/package/lib/libfoo.so</span></code>等路径下。机器上的<code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>位置不受影响。</p>
<p>一些提供的软件可能会指定<code class="docutils literal notranslate"><span class="pre">uninstall</span></code>规则，但CMake本身默认不生成这样的规则。</p>
</section>
<section id="id18">
<h2><a class="toc-backref" href="#id38" role="doc-backlink">运行测试</a><a class="headerlink" href="#id18" title="Link to this heading">¶</a></h2>
<p><span class="target" id="index-0-manual:ctest(1)"></span><a class="reference internal" href="../../manual/ctest.1.html#manual:ctest(1)" title="ctest(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">ctest(1)</span></code></a>工具随CMake发行版一起提供，用于执行所提供的测试并报告结果。尽管提供了<code class="docutils literal notranslate"><span class="pre">test</span></code>构建目标以运行所有可用的测试，但<span class="target" id="index-1-manual:ctest(1)"></span><a class="reference internal" href="../../manual/ctest.1.html#manual:ctest(1)" title="ctest(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">ctest(1)</span></code></a>工具也允许对运行哪些测试、如何运行它们以及如何报告结果进行细粒度控制。在构建目录中执行<span class="target" id="index-2-manual:ctest(1)"></span><a class="reference internal" href="../../manual/ctest.1.html#manual:ctest(1)" title="ctest(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">ctest(1)</span></code></a>相当于运行<code class="docutils literal notranslate"><span class="pre">test</span></code>目标：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ctest
</pre></div>
</div>
<p>可以传递正则表达式来只运行与该表达式匹配的测试。只运行以<code class="docutils literal notranslate"><span class="pre">Qt</span></code>命名的测试：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ctest<span class="w"> </span>-R<span class="w"> </span>Qt
</pre></div>
</div>
<p>正则表达式也可以排除测试。只运行名称中没有<code class="docutils literal notranslate"><span class="pre">Qt</span></code>的测试：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ctest<span class="w"> </span>-E<span class="w"> </span>Qt
</pre></div>
</div>
<p>通过向<span class="target" id="index-3-manual:ctest(1)"></span><a class="reference internal" href="../../manual/ctest.1.html#manual:ctest(1)" title="ctest(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">ctest(1)</span></code></a>传递<a class="reference internal" href="../../manual/ctest.1.html#cmdoption-ctest-j"><code class="xref std std-option docutils literal notranslate"><span class="pre">-j</span></code></a>参数，可以并行运行测试：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ctest<span class="w"> </span>-R<span class="w"> </span>Qt<span class="w"> </span>-j8
</pre></div>
</div>
<p>也可以设置环境变量<span class="target" id="index-0-envvar:CTEST_PARALLEL_LEVEL"></span><a class="reference internal" href="../../envvar/CTEST_PARALLEL_LEVEL.html#envvar:CTEST_PARALLEL_LEVEL" title="CTEST_PARALLEL_LEVEL"><code class="xref cmake cmake-envvar docutils literal notranslate"><span class="pre">CTEST_PARALLEL_LEVEL</span></code></a>，以避免需要传递<a class="reference internal" href="../../manual/ctest.1.html#cmdoption-ctest-j"><code class="xref std std-option docutils literal notranslate"><span class="pre">-j</span></code></a>。</p>
<p>默认情况下，<span class="target" id="index-4-manual:ctest(1)"></span><a class="reference internal" href="../../manual/ctest.1.html#manual:ctest(1)" title="ctest(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">ctest(1)</span></code></a>不打印测试的输出。命令行参数<a class="reference internal" href="../../manual/ctest.1.html#cmdoption-ctest-V"><code class="xref std std-option docutils literal notranslate"><span class="pre">-V</span></code></a>（或<code class="docutils literal notranslate"><span class="pre">--verbose</span></code>）启用verbose模式打印所有测试的输出。<a class="reference internal" href="../../manual/ctest.1.html#cmdoption-ctest-output-on-failure"><code class="xref std std-option docutils literal notranslate"><span class="pre">--output-on-failure</span></code></a>选项仅打印失败测试的测试输出。环境变量<span class="target" id="index-0-envvar:CTEST_OUTPUT_ON_FAILURE"></span><a class="reference internal" href="../../envvar/CTEST_OUTPUT_ON_FAILURE.html#envvar:CTEST_OUTPUT_ON_FAILURE" title="CTEST_OUTPUT_ON_FAILURE"><code class="xref cmake cmake-envvar docutils literal notranslate"><span class="pre">CTEST_OUTPUT_ON_FAILURE</span></code></a>可以设置为<code class="docutils literal notranslate"><span class="pre">1</span></code>，作为将<a class="reference internal" href="../../manual/ctest.1.html#cmdoption-ctest-output-on-failure"><code class="xref std std-option docutils literal notranslate"><span class="pre">--output-on-failure</span></code></a>选项传递给<span class="target" id="index-5-manual:ctest(1)"></span><a class="reference internal" href="../../manual/ctest.1.html#manual:ctest(1)" title="ctest(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">ctest(1)</span></code></a>的替代方法。</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#">用户交互指南</a><ul>
<li><a class="reference internal" href="#id3">引言</a><ul>
<li><a class="reference internal" href="#cmake">cmake命令行工具</a></li>
<li><a class="reference internal" href="#cmake-gui">cmake-gui工具</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">生成一个构建系统</a><ul>
<li><a class="reference internal" href="#id5">命令行环境</a></li>
<li><a class="reference internal" href="#g">命令行<code class="docutils literal notranslate"><span class="pre">-G</span></code>选项</a></li>
<li><a class="reference internal" href="#id6">在cmake-gui选择生成器</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-build-variables">设置构建变量</a><ul>
<li><a class="reference internal" href="#id8">在命令行设置变量</a></li>
<li><a class="reference internal" href="#id9">在cmake-gui设置变量</a></li>
<li><a class="reference internal" href="#id10">CMake缓存</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id11">预设</a><ul>
<li><a class="reference internal" href="#id12">在命令行使用预设</a></li>
<li><a class="reference internal" href="#id13">在cmake-gui使用预设</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id14">调用构建系统</a><ul>
<li><a class="reference internal" href="#id15">选择一个目标</a></li>
<li><a class="reference internal" href="#id16">指定一个构建程序</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id17">软件安装</a></li>
<li><a class="reference internal" href="#id18">运行测试</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>上一主题</h4>
    <p class="topless"><a href="../tutorial/Packaging%20Debug%20and%20Release.html"
                          title="上一章">步骤12：打包调试和发布</a></p>
  </div>
  <div>
    <h4>下一主题</h4>
    <p class="topless"><a href="../using-dependencies/index.html"
                          title="下一章">使用依赖项指南</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/guide/user-interaction/index.rst.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="提交" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="总索引"
             >索引</a></li>
        <li class="right" >
          <a href="../using-dependencies/index.html" title="使用依赖项指南"
             >下一页</a> |</li>
        <li class="right" >
          <a href="../tutorial/Packaging%20Debug%20and%20Release.html" title="步骤12：打包调试和发布"
             >上一页</a> |</li>
  <li>
    <img src="../../_static/cmake-logo-16.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="https://cmake.org/">CMake</a> &#187;
  </li>
  <li>
    <a href="../../index.html">3.29.1-g21d0c57 Documentation</a> &#187;
  </li>

        <li class="nav-item nav-item-this"><a href="">用户交互指南</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
    &#169; 版权所有 2000-2024 Kitware, Inc. and Contributors.
      由 <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6创建。
    </div>
  </body>
</html>