<!DOCTYPE html>

<html lang="zh-CN" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>cmake-qt(7) &mdash; CMake 3.29.1-g21d0c57 Documentation</title>

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a2c47e09" />
    <link rel="stylesheet" type="text/css" href="../_static/cmake.css?v=3e562cf9" />
    
    <script src="../_static/documentation_options.js?v=17f7ec5f"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    
    <link rel="icon" href="../_static/cmake-favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="cmake-server(7)" href="cmake-server.7.html" />
    <link rel="prev" title="COMPILE_DEFINITIONS_&lt;CONFIG&gt;" href="../prop_sf/COMPILE_DEFINITIONS_CONFIG.html" />
 

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="cmake-server.7.html" title="cmake-server(7)"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="../prop_sf/COMPILE_DEFINITIONS_CONFIG.html" title="COMPILE_DEFINITIONS_&lt;CONFIG&gt;"
             accesskey="P">上一页</a> |</li>
  <li>
    <img src="../_static/cmake-logo-16.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="https://cmake.org/">CMake</a> &#187;
  </li>
  <li>
    <a href="../index.html">3.29.1-g21d0c57 Documentation</a> &#187;
  </li>

        <li class="nav-item nav-item-this"><a href="">cmake-qt(7)</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="manual:cmake-qt(7)"></span><section id="cmake-qt-7">
<h1><a class="toc-backref" href="#id5" role="doc-backlink">cmake-qt(7)</a><a class="headerlink" href="#cmake-qt-7" title="Link to this heading">¶</a></h1>
<nav class="contents" id="id1">
<p class="topic-title">目录</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cmake-qt-7" id="id5">cmake-qt(7)</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id6">引言</a></p></li>
<li><p><a class="reference internal" href="#qt" id="id7">Qt构建工具</a></p>
<ul>
<li><p><a class="reference internal" href="#automoc" id="id8">AUTOMOC</a></p></li>
<li><p><a class="reference internal" href="#autouic" id="id9">AUTOUIC</a></p></li>
<li><p><a class="reference internal" href="#autorcc" id="id10">AUTORCC</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#origin-autogen" id="id11"><code class="docutils literal notranslate"><span class="pre">&lt;ORIGIN&gt;_autogen</span></code>目标</a></p></li>
<li><p><a class="reference internal" href="#origin-autogen-timestamp-deps" id="id12"><code class="docutils literal notranslate"><span class="pre">&lt;ORIGIN&gt;_autogen_timestamp_deps</span></code>目标</a></p></li>
<li><p><a class="reference internal" href="#visual-studio" id="id13">Visual Studio生成器</a></p></li>
<li><p><a class="reference internal" href="#windowsqtmain-lib" id="id14">Windows上的qtmain.lib</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="id2">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">引言</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p>CMake可以找到并使用Qt 4、Qt 5和Qt 6库。Qt 4库可以通过CMake自带的<span class="target" id="index-0-module:FindQt4"></span><a class="reference internal" href="../module/FindQt4.html#module:FindQt4" title="FindQt4"><code class="xref cmake cmake-module docutils literal notranslate"><span class="pre">FindQt4</span></code></a>搜寻模块找到，而Qt 5和Qt 6库可以通过Qt 5和Qt 6自带的“配置文件包”找到。有关CMake包的更多信息，请参见<span class="target" id="index-0-manual:cmake-packages(7)"></span><a class="reference internal" href="cmake-packages.7.html#manual:cmake-packages(7)" title="cmake-packages(7)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake-packages(7)</span></code></a>，并查看你所用Qt版本的<a class="reference external" href="https://doc.qt.io/qt-6/cmake-manual.html">Qt cmake手册</a>。</p>
<p>Qt 4、Qt 5和Qt 6可以在同一个<span class="target" id="index-0-manual:cmake-buildsystem(7)"></span><a class="reference internal" href="cmake-buildsystem.7.html#manual:cmake-buildsystem(7)" title="cmake-buildsystem(7)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">CMake</span> <span class="pre">buildsystem</span></code></a>中一起使用：</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">cmake_minimum_required(</span><span class="no">VERSION</span><span class="w"> </span><span class="m">3.16</span><span class="w"> </span><span class="no">FATAL_ERROR</span><span class="nf">)</span>

<span class="nf">project(</span><span class="nb">Qt4_5_6</span><span class="nf">)</span>

<span class="nf">set(</span><span class="no">CMAKE_AUTOMOC</span><span class="w"> </span><span class="no">ON</span><span class="nf">)</span>

<span class="nf">find_package(</span><span class="nb">Qt6</span><span class="w"> </span><span class="no">COMPONENTS</span><span class="w"> </span><span class="nb">Widgets</span><span class="w"> </span><span class="nb">DBus</span><span class="w"> </span><span class="no">REQUIRED</span><span class="nf">)</span>
<span class="nf">add_executable(</span><span class="nb">publisher</span><span class="w"> </span><span class="nb">publisher.cpp</span><span class="nf">)</span>
<span class="nf">target_link_libraries(</span><span class="nb">publisher</span><span class="w"> </span><span class="nb">Qt6</span><span class="o">::</span><span class="nb">Widgets</span><span class="w"> </span><span class="nb">Qt6</span><span class="o">::</span><span class="nb">DBus</span><span class="nf">)</span>

<span class="nf">find_package(</span><span class="nb">Qt5</span><span class="w"> </span><span class="no">COMPONENTS</span><span class="w"> </span><span class="nb">Gui</span><span class="w"> </span><span class="nb">DBus</span><span class="w"> </span><span class="no">REQUIRED</span><span class="nf">)</span>
<span class="nf">add_executable(</span><span class="nb">subscriber1</span><span class="w"> </span><span class="nb">subscriber1.cpp</span><span class="nf">)</span>
<span class="nf">target_link_libraries(</span><span class="nb">subscriber1</span><span class="w"> </span><span class="nb">Qt5</span><span class="o">::</span><span class="nb">Gui</span><span class="w"> </span><span class="nb">Qt5</span><span class="o">::</span><span class="nb">DBus</span><span class="nf">)</span>

<span class="nf">find_package(</span><span class="nb">Qt4</span><span class="w"> </span><span class="no">REQUIRED</span><span class="nf">)</span>
<span class="nf">add_executable(</span><span class="nb">subscriber2</span><span class="w"> </span><span class="nb">subscriber2.cpp</span><span class="nf">)</span>
<span class="nf">target_link_libraries(</span><span class="nb">subscriber2</span><span class="w"> </span><span class="nb">Qt4</span><span class="o">::</span><span class="nb">QtGui</span><span class="w"> </span><span class="nb">Qt4</span><span class="o">::</span><span class="nb">QtDBus</span><span class="nf">)</span>
</pre></div>
</div>
<p>一个CMake目标不应该同时链接到多个Qt版本。如果尝试执行此操作或从可传递目标依赖项评估得到此结果，则会发出诊断。</p>
</section>
<section id="qt">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Qt构建工具</a><a class="headerlink" href="#qt" title="Link to this heading">¶</a></h2>
<p>Qt依赖于一些捆绑的代码生成工具，比如用于元对象代码生成的<code class="docutils literal notranslate"><span class="pre">moc</span></code>，用于小部件布局和填充的<code class="docutils literal notranslate"><span class="pre">uic</span></code>，以及用于虚拟文件系统内容生成的<code class="docutils literal notranslate"><span class="pre">rcc</span></code>。如果满足适当的条件，<span class="target" id="index-0-manual:cmake(1)"></span><a class="reference internal" href="cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>可以自动调用这些工具。自动工具调用可以同时用于Qt 4到6。</p>
<section id="automoc">
<span id="qt-automoc"></span><h3><a class="toc-backref" href="#id8" role="doc-backlink">AUTOMOC</a><a class="headerlink" href="#automoc" title="Link to this heading">¶</a></h3>
<p><span class="target" id="index-0-prop_tgt:AUTOMOC"></span><a class="reference internal" href="../prop_tgt/AUTOMOC.html#prop_tgt:AUTOMOC" title="AUTOMOC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOMOC</span></code></a>目标属性控制<span class="target" id="index-1-manual:cmake(1)"></span><a class="reference internal" href="cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>是否检查目标中的C++文件，以确定它们是否需要运行<code class="docutils literal notranslate"><span class="pre">moc</span></code>，并在适当的时间创建规则来执行<code class="docutils literal notranslate"><span class="pre">moc</span></code>。</p>
<p>如果在头文件中发现了来自<span class="target" id="index-0-prop_tgt:AUTOMOC_MACRO_NAMES"></span><a class="reference internal" href="../prop_tgt/AUTOMOC_MACRO_NAMES.html#prop_tgt:AUTOMOC_MACRO_NAMES" title="AUTOMOC_MACRO_NAMES"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOMOC_MACRO_NAMES</span></code></a>的宏，则将在该文件上运行<code class="docutils literal notranslate"><span class="pre">moc</span></code>。结果将被放入一个根据<code class="docutils literal notranslate"><span class="pre">moc_&lt;basename&gt;.cpp</span></code>命名的文件中。遵循Qt约定，如果在C++实现文件中找到宏，则moc输出将被放入根据<code class="docutils literal notranslate"><span class="pre">&lt;basename&gt;.moc</span></code>命名的文件中。<code class="docutils literal notranslate"><span class="pre">&lt;basename&gt;.moc</span></code>必须由用户使用预处理器<code class="docutils literal notranslate"><span class="pre">#include</span></code>包含在C++实现文件中。</p>
<p>包括<code class="docutils literal notranslate"><span class="pre">moc_*.cpp</span></code>和<code class="docutils literal notranslate"><span class="pre">*.moc</span></code>文件将生成在<code class="docutils literal notranslate"><span class="pre">&lt;AUTOGEN_BUILD_DIR&gt;/include</span></code>目录下，该目录会自动添加到目标的<span class="target" id="index-0-prop_tgt:INCLUDE_DIRECTORIES"></span><a class="reference internal" href="../prop_tgt/INCLUDE_DIRECTORIES.html#prop_tgt:INCLUDE_DIRECTORIES" title="INCLUDE_DIRECTORIES"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">INCLUDE_DIRECTORIES</span></code></a>目录中。</p>
<ul class="simple">
<li><p>这与CMake 3.7及以下版本不同；详细信息请参阅它们的文档。</p></li>
<li><p>对于<span class="target" id="index-0-prop_gbl:GENERATOR_IS_MULTI_CONFIG"></span><a class="reference internal" href="../prop_gbl/GENERATOR_IS_MULTI_CONFIG.html#prop_gbl:GENERATOR_IS_MULTI_CONFIG" title="GENERATOR_IS_MULTI_CONFIG"><code class="xref cmake cmake-prop_gbl docutils literal notranslate"><span class="pre">多配置生成器</span></code></a>，包含目录为<code class="docutils literal notranslate"><span class="pre">&lt;AUTOGEN_BUILD_DIR&gt;/include_&lt;CONFIG&gt;</span></code>。</p></li>
<li><p>参考<span class="target" id="index-0-prop_tgt:AUTOGEN_BUILD_DIR"></span><a class="reference internal" href="../prop_tgt/AUTOGEN_BUILD_DIR.html#prop_tgt:AUTOGEN_BUILD_DIR" title="AUTOGEN_BUILD_DIR"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOGEN_BUILD_DIR</span></code></a>。</p></li>
</ul>
<p>不包含<code class="docutils literal notranslate"><span class="pre">moc_&lt;basename&gt;.cpp</span></code>文件将在自定义文件夹中生成，以避免名称冲突，并包含在编译到目标中的单独文件中，命名为<code class="docutils literal notranslate"><span class="pre">&lt;AUTOGEN_BUILD_DIR&gt;/mocs_compilation.cpp</span></code>或<code class="docutils literal notranslate"><span class="pre">&lt;AUTOGEN_BUILD_DIR&gt;/mocs_compilation_$&lt;CONFIG&gt;.cpp</span></code>。</p>
<ul class="simple">
<li><p>参考<span class="target" id="index-1-prop_tgt:AUTOGEN_BUILD_DIR"></span><a class="reference internal" href="../prop_tgt/AUTOGEN_BUILD_DIR.html#prop_tgt:AUTOGEN_BUILD_DIR" title="AUTOGEN_BUILD_DIR"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOGEN_BUILD_DIR</span></code></a>。</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">moc</span></code>命令行将使用它所调用的目标的<span class="target" id="index-0-prop_tgt:COMPILE_DEFINITIONS"></span><a class="reference internal" href="../prop_tgt/COMPILE_DEFINITIONS.html#prop_tgt:COMPILE_DEFINITIONS" title="COMPILE_DEFINITIONS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">COMPILE_DEFINITIONS</span></code></a>和<span class="target" id="index-1-prop_tgt:INCLUDE_DIRECTORIES"></span><a class="reference internal" href="../prop_tgt/INCLUDE_DIRECTORIES.html#prop_tgt:INCLUDE_DIRECTORIES" title="INCLUDE_DIRECTORIES"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">INCLUDE_DIRECTORIES</span></code></a>目标属性，以及适当的构建配置。</p>
<p><span class="target" id="index-1-prop_tgt:AUTOMOC"></span><a class="reference internal" href="../prop_tgt/AUTOMOC.html#prop_tgt:AUTOMOC" title="AUTOMOC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOMOC</span></code></a>目标属性可以通过设置<span class="target" id="index-0-variable:CMAKE_AUTOMOC"></span><a class="reference internal" href="../variable/CMAKE_AUTOMOC.html#variable:CMAKE_AUTOMOC" title="CMAKE_AUTOMOC"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_AUTOMOC</span></code></a>变量预先为以下所有目标设置。可以填充<span class="target" id="index-0-prop_tgt:AUTOMOC_MOC_OPTIONS"></span><a class="reference internal" href="../prop_tgt/AUTOMOC_MOC_OPTIONS.html#prop_tgt:AUTOMOC_MOC_OPTIONS" title="AUTOMOC_MOC_OPTIONS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOMOC_MOC_OPTIONS</span></code></a>目标属性来设置要传递给<code class="docutils literal notranslate"><span class="pre">moc</span></code>的选项。可以填充<span class="target" id="index-0-variable:CMAKE_AUTOMOC_MOC_OPTIONS"></span><a class="reference internal" href="../variable/CMAKE_AUTOMOC_MOC_OPTIONS.html#variable:CMAKE_AUTOMOC_MOC_OPTIONS" title="CMAKE_AUTOMOC_MOC_OPTIONS"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_AUTOMOC_MOC_OPTIONS</span></code></a>变量，以预先设置以下所有目标的选项。</p>
<p>可以将其他要搜索的宏名称添加到<span class="target" id="index-1-prop_tgt:AUTOMOC_MACRO_NAMES"></span><a class="reference internal" href="../prop_tgt/AUTOMOC_MACRO_NAMES.html#prop_tgt:AUTOMOC_MACRO_NAMES" title="AUTOMOC_MACRO_NAMES"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOMOC_MACRO_NAMES</span></code></a>中。</p>
<p>可以使用<span class="target" id="index-0-prop_tgt:AUTOMOC_DEPEND_FILTERS"></span><a class="reference internal" href="../prop_tgt/AUTOMOC_DEPEND_FILTERS.html#prop_tgt:AUTOMOC_DEPEND_FILTERS" title="AUTOMOC_DEPEND_FILTERS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOMOC_DEPEND_FILTERS</span></code></a>从源代码中提取其他<code class="docutils literal notranslate"><span class="pre">moc</span></code>依赖文件名称。</p>
<p>通过启用<span class="target" id="index-0-prop_sf:SKIP_AUTOMOC"></span><a class="reference internal" href="../prop_sf/SKIP_AUTOMOC.html#prop_sf:SKIP_AUTOMOC" title="SKIP_AUTOMOC"><code class="xref cmake cmake-prop_sf docutils literal notranslate"><span class="pre">SKIP_AUTOMOC</span></code></a>或更广泛的<span class="target" id="index-0-prop_sf:SKIP_AUTOGEN"></span><a class="reference internal" href="../prop_sf/SKIP_AUTOGEN.html#prop_sf:SKIP_AUTOGEN" title="SKIP_AUTOGEN"><code class="xref cmake cmake-prop_sf docutils literal notranslate"><span class="pre">SKIP_AUTOGEN</span></code></a>，可以将源C++文件排除在<span class="target" id="index-2-prop_tgt:AUTOMOC"></span><a class="reference internal" href="../prop_tgt/AUTOMOC.html#prop_tgt:AUTOMOC" title="AUTOMOC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOMOC</span></code></a>处理之外。</p>
</section>
<section id="autouic">
<span id="qt-autouic"></span><h3><a class="toc-backref" href="#id9" role="doc-backlink">AUTOUIC</a><a class="headerlink" href="#autouic" title="Link to this heading">¶</a></h3>
<p><span class="target" id="index-0-prop_tgt:AUTOUIC"></span><a class="reference internal" href="../prop_tgt/AUTOUIC.html#prop_tgt:AUTOUIC" title="AUTOUIC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOUIC</span></code></a>目标属性控制<span class="target" id="index-2-manual:cmake(1)"></span><a class="reference internal" href="cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>是否检查目标中的C++文件，以确定它们是否需要运行<code class="docutils literal notranslate"><span class="pre">uic</span></code>，并在适当的时候创建规则来执行<code class="docutils literal notranslate"><span class="pre">uic</span></code>。</p>
<p>如果发现预处理器<code class="docutils literal notranslate"><span class="pre">#include</span></code>指令匹配<code class="docutils literal notranslate"><span class="pre">&lt;path&gt;ui_&lt;basename&gt;.h</span></code>和<code class="docutils literal notranslate"><span class="pre">&lt;basename&gt;.ui</span></code>文件存在，则执行<code class="docutils literal notranslate"><span class="pre">uic</span></code>生成相应的文件。在以下位置搜索<code class="docutils literal notranslate"><span class="pre">&lt;basename&gt;.ui</span></code>文件</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;source_dir&gt;/&lt;basename&gt;.ui</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;source_dir&gt;/&lt;path&gt;&lt;basename&gt;.ui</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;AUTOUIC_SEARCH_PATHS&gt;/&lt;basename&gt;.ui</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;AUTOUIC_SEARCH_PATHS&gt;/&lt;path&gt;&lt;basename&gt;.ui</span></code></p></li>
</ol>
<p>其中<code class="docutils literal notranslate"><span class="pre">&lt;source_dir&gt;</span></code>是C++文件的目录，<span class="target" id="index-0-prop_tgt:AUTOUIC_SEARCH_PATHS"></span><a class="reference internal" href="../prop_tgt/AUTOUIC_SEARCH_PATHS.html#prop_tgt:AUTOUIC_SEARCH_PATHS" title="AUTOUIC_SEARCH_PATHS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOUIC_SEARCH_PATHS</span></code></a>是附加搜索路径的列表。</p>
<p>生成的<code class="docutils literal notranslate"><span class="pre">ui_*.h</span></code>文件被放置在<code class="docutils literal notranslate"><span class="pre">&lt;AUTOGEN_BUILD_DIR&gt;/include</span></code>目录中，该目录会自动添加到目标的<span class="target" id="index-2-prop_tgt:INCLUDE_DIRECTORIES"></span><a class="reference internal" href="../prop_tgt/INCLUDE_DIRECTORIES.html#prop_tgt:INCLUDE_DIRECTORIES" title="INCLUDE_DIRECTORIES"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">INCLUDE_DIRECTORIES</span></code></a>目录中。</p>
<ul class="simple">
<li><p>这与CMake 3.7及以下版本不同；详细信息请参阅它们的文档。</p></li>
<li><p>对于<span class="target" id="index-1-prop_gbl:GENERATOR_IS_MULTI_CONFIG"></span><a class="reference internal" href="../prop_gbl/GENERATOR_IS_MULTI_CONFIG.html#prop_gbl:GENERATOR_IS_MULTI_CONFIG" title="GENERATOR_IS_MULTI_CONFIG"><code class="xref cmake cmake-prop_gbl docutils literal notranslate"><span class="pre">多配置生成器</span></code></a>，包含目录为<code class="docutils literal notranslate"><span class="pre">&lt;AUTOGEN_BUILD_DIR&gt;/include_&lt;CONFIG&gt;</span></code>。</p></li>
<li><p>参考<span class="target" id="index-2-prop_tgt:AUTOGEN_BUILD_DIR"></span><a class="reference internal" href="../prop_tgt/AUTOGEN_BUILD_DIR.html#prop_tgt:AUTOGEN_BUILD_DIR" title="AUTOGEN_BUILD_DIR"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOGEN_BUILD_DIR</span></code></a>。</p></li>
</ul>
<p><span class="target" id="index-1-prop_tgt:AUTOUIC"></span><a class="reference internal" href="../prop_tgt/AUTOUIC.html#prop_tgt:AUTOUIC" title="AUTOUIC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOUIC</span></code></a>目标属性可以通过设置<span class="target" id="index-0-variable:CMAKE_AUTOUIC"></span><a class="reference internal" href="../variable/CMAKE_AUTOUIC.html#variable:CMAKE_AUTOUIC" title="CMAKE_AUTOUIC"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_AUTOUIC</span></code></a>变量预先为以下所有目标设置。<span class="target" id="index-0-prop_tgt:AUTOUIC_OPTIONS"></span><a class="reference internal" href="../prop_tgt/AUTOUIC_OPTIONS.html#prop_tgt:AUTOUIC_OPTIONS" title="AUTOUIC_OPTIONS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOUIC_OPTIONS</span></code></a>目标属性可以被填充以设置传递给<code class="docutils literal notranslate"><span class="pre">uic</span></code>的选项。可以填充<span class="target" id="index-0-variable:CMAKE_AUTOUIC_OPTIONS"></span><a class="reference internal" href="../variable/CMAKE_AUTOUIC_OPTIONS.html#variable:CMAKE_AUTOUIC_OPTIONS" title="CMAKE_AUTOUIC_OPTIONS"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_AUTOUIC_OPTIONS</span></code></a>变量，以预先设置以下所有目标的选项。<span class="target" id="index-0-prop_sf:AUTOUIC_OPTIONS"></span><a class="reference internal" href="../prop_sf/AUTOUIC_OPTIONS.html#prop_sf:AUTOUIC_OPTIONS" title="AUTOUIC_OPTIONS"><code class="xref cmake cmake-prop_sf docutils literal notranslate"><span class="pre">AUTOUIC_OPTIONS</span></code></a>源文件属性可以在<code class="docutils literal notranslate"><span class="pre">&lt;basename&gt;.ui</span></code>文件上来设置文件的特定选项。这将覆盖<span class="target" id="index-1-prop_tgt:AUTOUIC_OPTIONS"></span><a class="reference internal" href="../prop_tgt/AUTOUIC_OPTIONS.html#prop_tgt:AUTOUIC_OPTIONS" title="AUTOUIC_OPTIONS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOUIC_OPTIONS</span></code></a>目标属性中的选项。</p>
<p>一个目标可以用调用<code class="docutils literal notranslate"><span class="pre">uic</span></code>时应该使用的选项填充<span class="target" id="index-0-prop_tgt:INTERFACE_AUTOUIC_OPTIONS"></span><a class="reference internal" href="../prop_tgt/INTERFACE_AUTOUIC_OPTIONS.html#prop_tgt:INTERFACE_AUTOUIC_OPTIONS" title="INTERFACE_AUTOUIC_OPTIONS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">INTERFACE_AUTOUIC_OPTIONS</span></code></a>目标属性。这必须与依赖器目标的<span class="target" id="index-2-prop_tgt:AUTOUIC_OPTIONS"></span><a class="reference internal" href="../prop_tgt/AUTOUIC_OPTIONS.html#prop_tgt:AUTOUIC_OPTIONS" title="AUTOUIC_OPTIONS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOUIC_OPTIONS</span></code></a>目标属性内容一致。<span class="target" id="index-0-variable:CMAKE_DEBUG_TARGET_PROPERTIES"></span><a class="reference internal" href="../variable/CMAKE_DEBUG_TARGET_PROPERTIES.html#variable:CMAKE_DEBUG_TARGET_PROPERTIES" title="CMAKE_DEBUG_TARGET_PROPERTIES"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_DEBUG_TARGET_PROPERTIES</span></code></a>变量可以用来跟踪这样的<span class="target" id="index-1-prop_tgt:INTERFACE_AUTOUIC_OPTIONS"></span><a class="reference internal" href="../prop_tgt/INTERFACE_AUTOUIC_OPTIONS.html#prop_tgt:INTERFACE_AUTOUIC_OPTIONS" title="INTERFACE_AUTOUIC_OPTIONS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">INTERFACE_AUTOUIC_OPTIONS</span></code></a>的起始目标。这意味着为Qt提供替代翻译系统的库可以指定运行<code class="docutils literal notranslate"><span class="pre">uic</span></code>时应该使用的选项：</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">add_library(</span><span class="nb">KI18n</span><span class="w"> </span><span class="nb">klocalizedstring.cpp</span><span class="nf">)</span>
<span class="nf">target_link_libraries(</span><span class="nb">KI18n</span><span class="w"> </span><span class="nb">Qt6</span><span class="o">::</span><span class="nb">Core</span><span class="nf">)</span>

<span class="c"># KI18n uses the tr2i18n() function instead of tr().  That function is</span>
<span class="c"># declared in the klocalizedstring.h header.</span>
<span class="nf">set(</span><span class="nb">autouic_options</span>
<span class="w">  </span><span class="p">-</span><span class="nb">tr</span><span class="w"> </span><span class="nb">tr2i18n</span>
<span class="w">  </span><span class="p">-</span><span class="nb">include</span><span class="w"> </span><span class="nb">klocalizedstring.h</span>
<span class="nf">)</span>

<span class="nf">set_property(</span><span class="no">TARGET</span><span class="w"> </span><span class="nb">KI18n</span><span class="w"> </span><span class="no">APPEND</span><span class="w"> </span><span class="no">PROPERTY</span>
<span class="w">  </span><span class="no">INTERFACE_AUTOUIC_OPTIONS</span><span class="w"> </span><span class="o">${</span><span class="nt">autouic_options</span><span class="o">}</span>
<span class="nf">)</span>
</pre></div>
</div>
<p>当<code class="docutils literal notranslate"><span class="pre">uic</span></code>被<span class="target" id="index-2-prop_tgt:AUTOUIC"></span><a class="reference internal" href="../prop_tgt/AUTOUIC.html#prop_tgt:AUTOUIC" title="AUTOUIC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOUIC</span></code></a>运行时，一个连接到上游导出目标的消费项目会自动使用适当的选项，这是连接到<span class="target" id="index-0-prop_tgt:IMPORTED"></span><a class="reference internal" href="../prop_tgt/IMPORTED.html#prop_tgt:IMPORTED" title="IMPORTED"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">IMPORTED</span></code></a>目标的结果：</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">set(</span><span class="no">CMAKE_AUTOUIC</span><span class="w"> </span><span class="no">ON</span><span class="nf">)</span>
<span class="c"># Uses a libwidget.ui file:</span>
<span class="nf">add_library(</span><span class="nb">LibWidget</span><span class="w"> </span><span class="nb">libwidget.cpp</span><span class="nf">)</span>
<span class="nf">target_link_libraries(</span><span class="nb">LibWidget</span>
<span class="w">  </span><span class="no">KF5</span><span class="o">::</span><span class="nb">KI18n</span>
<span class="w">  </span><span class="nb">Qt5</span><span class="o">::</span><span class="nb">Widgets</span>
<span class="nf">)</span>
</pre></div>
</div>
<p>通过启用<span class="target" id="index-0-prop_sf:SKIP_AUTOUIC"></span><a class="reference internal" href="../prop_sf/SKIP_AUTOUIC.html#prop_sf:SKIP_AUTOUIC" title="SKIP_AUTOUIC"><code class="xref cmake cmake-prop_sf docutils literal notranslate"><span class="pre">SKIP_AUTOUIC</span></code></a>或更广泛的<span class="target" id="index-1-prop_sf:SKIP_AUTOGEN"></span><a class="reference internal" href="../prop_sf/SKIP_AUTOGEN.html#prop_sf:SKIP_AUTOGEN" title="SKIP_AUTOGEN"><code class="xref cmake cmake-prop_sf docutils literal notranslate"><span class="pre">SKIP_AUTOGEN</span></code></a>，可以将源文件排除在<span class="target" id="index-3-prop_tgt:AUTOUIC"></span><a class="reference internal" href="../prop_tgt/AUTOUIC.html#prop_tgt:AUTOUIC" title="AUTOUIC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOUIC</span></code></a>处理之外。</p>
</section>
<section id="autorcc">
<span id="qt-autorcc"></span><h3><a class="toc-backref" href="#id10" role="doc-backlink">AUTORCC</a><a class="headerlink" href="#autorcc" title="Link to this heading">¶</a></h3>
<p><span class="target" id="index-0-prop_tgt:AUTORCC"></span><a class="reference internal" href="../prop_tgt/AUTORCC.html#prop_tgt:AUTORCC" title="AUTORCC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTORCC</span></code></a>目标属性控制<span class="target" id="index-3-manual:cmake(1)"></span><a class="reference internal" href="cmake.1.html#manual:cmake(1)" title="cmake(1)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake(1)</span></code></a>是否创建规则在适当的时间对后缀为<code class="docutils literal notranslate"><span class="pre">.qrc</span></code>的源文件执行<code class="docutils literal notranslate"><span class="pre">rcc</span></code>。</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">add_executable(</span><span class="nb">myexe</span><span class="w"> </span><span class="nb">main.cpp</span><span class="w"> </span><span class="nb">resource_file.qrc</span><span class="nf">)</span>
</pre></div>
</div>
<p>通过设置<span class="target" id="index-0-variable:CMAKE_AUTORCC"></span><a class="reference internal" href="../variable/CMAKE_AUTORCC.html#variable:CMAKE_AUTORCC" title="CMAKE_AUTORCC"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_AUTORCC</span></code></a>变量，可以为以下所有目标预先设置<span class="target" id="index-1-prop_tgt:AUTORCC"></span><a class="reference internal" href="../prop_tgt/AUTORCC.html#prop_tgt:AUTORCC" title="AUTORCC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTORCC</span></code></a>目标属性。可以填充<span class="target" id="index-0-prop_tgt:AUTORCC_OPTIONS"></span><a class="reference internal" href="../prop_tgt/AUTORCC_OPTIONS.html#prop_tgt:AUTORCC_OPTIONS" title="AUTORCC_OPTIONS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTORCC_OPTIONS</span></code></a>目标属性来设置传递给<code class="docutils literal notranslate"><span class="pre">rcc</span></code>的选项。可以填充<span class="target" id="index-0-variable:CMAKE_AUTORCC_OPTIONS"></span><a class="reference internal" href="../variable/CMAKE_AUTORCC_OPTIONS.html#variable:CMAKE_AUTORCC_OPTIONS" title="CMAKE_AUTORCC_OPTIONS"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_AUTORCC_OPTIONS</span></code></a>变量，以预先设置以下所有目标的选项。<span class="target" id="index-0-prop_sf:AUTORCC_OPTIONS"></span><a class="reference internal" href="../prop_sf/AUTORCC_OPTIONS.html#prop_sf:AUTORCC_OPTIONS" title="AUTORCC_OPTIONS"><code class="xref cmake cmake-prop_sf docutils literal notranslate"><span class="pre">AUTORCC_OPTIONS</span></code></a>源文件属性可以在<code class="docutils literal notranslate"><span class="pre">&lt;name&gt;.qrc</span></code>文件上设置文件的特定选项。这将覆盖<span class="target" id="index-1-prop_tgt:AUTORCC_OPTIONS"></span><a class="reference internal" href="../prop_tgt/AUTORCC_OPTIONS.html#prop_tgt:AUTORCC_OPTIONS" title="AUTORCC_OPTIONS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTORCC_OPTIONS</span></code></a>目标属性中的选项。</p>
<p>通过启用<span class="target" id="index-0-prop_sf:SKIP_AUTORCC"></span><a class="reference internal" href="../prop_sf/SKIP_AUTORCC.html#prop_sf:SKIP_AUTORCC" title="SKIP_AUTORCC"><code class="xref cmake cmake-prop_sf docutils literal notranslate"><span class="pre">SKIP_AUTORCC</span></code></a>或更广泛的<span class="target" id="index-2-prop_sf:SKIP_AUTOGEN"></span><a class="reference internal" href="../prop_sf/SKIP_AUTOGEN.html#prop_sf:SKIP_AUTOGEN" title="SKIP_AUTOGEN"><code class="xref cmake cmake-prop_sf docutils literal notranslate"><span class="pre">SKIP_AUTOGEN</span></code></a>，源文件可以从<span class="target" id="index-2-prop_tgt:AUTORCC"></span><a class="reference internal" href="../prop_tgt/AUTORCC.html#prop_tgt:AUTORCC" title="AUTORCC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTORCC</span></code></a>处理中排除。</p>
</section>
</section>
<section id="origin-autogen">
<span id="id3"></span><h2><a class="toc-backref" href="#id11" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;ORIGIN&gt;_autogen</span></code>目标</a><a class="headerlink" href="#origin-autogen" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">moc</span></code>和<code class="docutils literal notranslate"><span class="pre">uic</span></code>工具作为CMake生成的合成<a class="reference internal" href="#origin-autogen"><span class="std std-ref">&lt;ORIGIN&gt;_autogen</span></a><span class="target" id="index-0-command:add_custom_target"></span><a class="reference internal" href="../command/add_custom_target.html#command:add_custom_target" title="add_custom_target"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">自定义目标</span></code></a>的一部分执行。默认情况下，<code class="docutils literal notranslate"><span class="pre">&lt;ORIGIN&gt;_autogen</span></code>目标继承了<code class="docutils literal notranslate"><span class="pre">&lt;ORIGIN&gt;</span></code>目标的依赖关系（参见<span class="target" id="index-0-prop_tgt:AUTOGEN_ORIGIN_DEPENDS"></span><a class="reference internal" href="../prop_tgt/AUTOGEN_ORIGIN_DEPENDS.html#prop_tgt:AUTOGEN_ORIGIN_DEPENDS" title="AUTOGEN_ORIGIN_DEPENDS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOGEN_ORIGIN_DEPENDS</span></code></a>）。通过将目标依赖项添加到<span class="target" id="index-0-prop_tgt:AUTOGEN_TARGET_DEPENDS"></span><a class="reference internal" href="../prop_tgt/AUTOGEN_TARGET_DEPENDS.html#prop_tgt:AUTOGEN_TARGET_DEPENDS" title="AUTOGEN_TARGET_DEPENDS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOGEN_TARGET_DEPENDS</span></code></a>目标属性，可以将它们添加到<a class="reference internal" href="#origin-autogen"><span class="std std-ref">&lt;ORIGIN&gt;_autogen目标</span></a>中。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>如果使用Qt 5.15或更高版本，并且生成器是<span class="target" id="index-0-generator:Ninja"></span><a class="reference internal" href="../generator/Ninja.html#generator:Ninja" title="Ninja"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">Ninja</span></code></a>或<a class="reference internal" href="cmake-generators.7.html#makefile-generators"><span class="std std-ref">Makefile生成器</span></a>，请参阅<a class="reference internal" href="#origin-autogen-timestamp-deps"><span class="std std-ref">&lt;ORIGIN&gt;_autogen_timestamp_deps目标</span></a>。</p>
</div>
</section>
<section id="origin-autogen-timestamp-deps">
<span id="id4"></span><h2><a class="toc-backref" href="#id12" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;ORIGIN&gt;_autogen_timestamp_deps</span></code>目标</a><a class="headerlink" href="#origin-autogen-timestamp-deps" title="Link to this heading">¶</a></h2>
<p>如果使用Qt 5.15或更高版本，并且生成器是<span class="target" id="index-1-generator:Ninja"></span><a class="reference internal" href="../generator/Ninja.html#generator:Ninja" title="Ninja"><code class="xref cmake cmake-generator docutils literal notranslate"><span class="pre">Ninja</span></code></a>或<a class="reference internal" href="cmake-generators.7.html#makefile-generators"><span class="std std-ref">Makefile生成器</span></a>，则除了<a class="reference internal" href="#origin-autogen"><span class="std std-ref">&lt;ORIGIN&gt;_autogen目标</span></a>之外，还创建了<code class="docutils literal notranslate"><span class="pre">&lt;ORIGIN&gt;_autogen_timestamp_deps</span></code>目标。这个目标没有任何要执行的源或命令，但是它有以前由Qt 5.15之前的<a class="reference internal" href="#origin-autogen"><span class="std std-ref">&lt;ORIGIN&gt;_autogen目标</span></a>继承的依赖项。这些依赖项将作为自定义命令的顺序依赖项列表，而不会强制重新执行自定义命令。</p>
</section>
<section id="visual-studio">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Visual Studio生成器</a><a class="headerlink" href="#visual-studio" title="Link to this heading">¶</a></h2>
<p>当使用<span class="target" id="index-0-manual:cmake-generators(7)"></span><a class="reference internal" href="cmake-generators.7.html#manual:cmake-generators(7)" title="cmake-generators(7)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">Visual</span> <span class="pre">Studio生成器</span></code></a>时，CMake生成一个<code class="docutils literal notranslate"><span class="pre">PRE_BUILD</span></code><span class="target" id="index-0-command:add_custom_command"></span><a class="reference internal" href="../command/add_custom_command.html#command:add_custom_command" title="add_custom_command"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">自定义命令</span></code></a>，而不是<a class="reference internal" href="#origin-autogen"><span class="std std-ref">&lt;ORIGIN&gt;_autogen</span></a><span class="target" id="index-1-command:add_custom_target"></span><a class="reference internal" href="../command/add_custom_target.html#command:add_custom_target" title="add_custom_target"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">自定义目标</span></code></a>（用于<span class="target" id="index-3-prop_tgt:AUTOMOC"></span><a class="reference internal" href="../prop_tgt/AUTOMOC.html#prop_tgt:AUTOMOC" title="AUTOMOC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOMOC</span></code></a>和<span class="target" id="index-4-prop_tgt:AUTOUIC"></span><a class="reference internal" href="../prop_tgt/AUTOUIC.html#prop_tgt:AUTOUIC" title="AUTOUIC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOUIC</span></code></a>）。但这并不总是可能的，并且在以下任何情况下都会使用<a class="reference internal" href="#origin-autogen"><span class="std std-ref">&lt;ORIGIN&gt;_autogen</span></a><span class="target" id="index-2-command:add_custom_target"></span><a class="reference internal" href="../command/add_custom_target.html#command:add_custom_target" title="add_custom_target"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">自定义目标</span></code></a></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;ORIGIN&gt;</span></code>目标依赖于来自<span class="target" id="index-4-prop_tgt:AUTOMOC"></span><a class="reference internal" href="../prop_tgt/AUTOMOC.html#prop_tgt:AUTOMOC" title="AUTOMOC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOMOC</span></code></a>和<span class="target" id="index-5-prop_tgt:AUTOUIC"></span><a class="reference internal" href="../prop_tgt/AUTOUIC.html#prop_tgt:AUTOUIC" title="AUTOUIC"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOUIC</span></code></a>而未被<span class="target" id="index-1-prop_sf:SKIP_AUTOMOC"></span><a class="reference internal" href="../prop_sf/SKIP_AUTOMOC.html#prop_sf:SKIP_AUTOMOC" title="SKIP_AUTOMOC"><code class="xref cmake cmake-prop_sf docutils literal notranslate"><span class="pre">SKIP_AUTOMOC</span></code></a>、<span class="target" id="index-1-prop_sf:SKIP_AUTOUIC"></span><a class="reference internal" href="../prop_sf/SKIP_AUTOUIC.html#prop_sf:SKIP_AUTOUIC" title="SKIP_AUTOUIC"><code class="xref cmake cmake-prop_sf docutils literal notranslate"><span class="pre">SKIP_AUTOUIC</span></code></a>、<span class="target" id="index-3-prop_sf:SKIP_AUTOGEN"></span><a class="reference internal" href="../prop_sf/SKIP_AUTOGEN.html#prop_sf:SKIP_AUTOGEN" title="SKIP_AUTOGEN"><code class="xref cmake cmake-prop_sf docutils literal notranslate"><span class="pre">SKIP_AUTOGEN</span></code></a>或<span class="target" id="index-0-policy:CMP0071"></span><a class="reference internal" href="../policy/CMP0071.html#policy:CMP0071" title="CMP0071"><code class="xref cmake cmake-policy docutils literal notranslate"><span class="pre">CMP0071</span></code></a>排除的<span class="target" id="index-0-prop_sf:GENERATED"></span><a class="reference internal" href="../prop_sf/GENERATED.html#prop_sf:GENERATED" title="GENERATED"><code class="xref cmake cmake-prop_sf docutils literal notranslate"><span class="pre">GENERATED</span></code></a>文件</p></li>
<li><p><span class="target" id="index-1-prop_tgt:AUTOGEN_TARGET_DEPENDS"></span><a class="reference internal" href="../prop_tgt/AUTOGEN_TARGET_DEPENDS.html#prop_tgt:AUTOGEN_TARGET_DEPENDS" title="AUTOGEN_TARGET_DEPENDS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">AUTOGEN_TARGET_DEPENDS</span></code></a>列出了一个源文件</p></li>
<li><p><span class="target" id="index-0-variable:CMAKE_GLOBAL_AUTOGEN_TARGET"></span><a class="reference internal" href="../variable/CMAKE_GLOBAL_AUTOGEN_TARGET.html#variable:CMAKE_GLOBAL_AUTOGEN_TARGET" title="CMAKE_GLOBAL_AUTOGEN_TARGET"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_GLOBAL_AUTOGEN_TARGET</span></code></a>已启用</p></li>
</ul>
</section>
<section id="windowsqtmain-lib">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Windows上的qtmain.lib</a><a class="headerlink" href="#windowsqtmain-lib" title="Link to this heading">¶</a></h2>
<p>QtGui库的Qt 4和5<span class="target" id="index-1-prop_tgt:IMPORTED"></span><a class="reference internal" href="../prop_tgt/IMPORTED.html#prop_tgt:IMPORTED" title="IMPORTED"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">IMPORTED</span></code></a>目标指定Qt附带的qtmain.lib静态库将被所有已启用<span class="target" id="index-0-prop_tgt:WIN32_EXECUTABLE"></span><a class="reference internal" href="../prop_tgt/WIN32_EXECUTABLE.html#prop_tgt:WIN32_EXECUTABLE" title="WIN32_EXECUTABLE"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">WIN32_EXECUTABLE</span></code></a>的依赖可执行文件链接。</p>
<p>若要禁用此行为，请为基于Qt5的目标启用<code class="docutils literal notranslate"><span class="pre">Qt5_NO_LINK_QTMAIN</span></code>目标属性，或为基于Qt 4的目标启用<code class="docutils literal notranslate"><span class="pre">QT4_NO_LINK_QTMAIN</span></code>目标属性。</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">add_executable(</span><span class="nb">myexe</span><span class="w"> </span><span class="no">WIN32</span><span class="w"> </span><span class="nb">main.cpp</span><span class="nf">)</span>
<span class="nf">target_link_libraries(</span><span class="nb">myexe</span><span class="w"> </span><span class="nb">Qt4</span><span class="o">::</span><span class="nb">QtGui</span><span class="nf">)</span>

<span class="nf">add_executable(</span><span class="nb">myexe_no_qtmain</span><span class="w"> </span><span class="no">WIN32</span><span class="w"> </span><span class="nb">main_no_qtmain.cpp</span><span class="nf">)</span>
<span class="nf">set_property(</span><span class="no">TARGET</span><span class="w"> </span><span class="nb">main_no_qtmain</span><span class="w"> </span><span class="no">PROPERTY</span><span class="w"> </span><span class="no">QT4_NO_LINK_QTMAIN</span><span class="w"> </span><span class="no">ON</span><span class="nf">)</span>
<span class="nf">target_link_libraries(</span><span class="nb">main_no_qtmain</span><span class="w"> </span><span class="nb">Qt4</span><span class="o">::</span><span class="nb">QtGui</span><span class="nf">)</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#">cmake-qt(7)</a><ul>
<li><a class="reference internal" href="#id2">引言</a></li>
<li><a class="reference internal" href="#qt">Qt构建工具</a><ul>
<li><a class="reference internal" href="#automoc">AUTOMOC</a></li>
<li><a class="reference internal" href="#autouic">AUTOUIC</a></li>
<li><a class="reference internal" href="#autorcc">AUTORCC</a></li>
</ul>
</li>
<li><a class="reference internal" href="#origin-autogen"><code class="docutils literal notranslate"><span class="pre">&lt;ORIGIN&gt;_autogen</span></code>目标</a></li>
<li><a class="reference internal" href="#origin-autogen-timestamp-deps"><code class="docutils literal notranslate"><span class="pre">&lt;ORIGIN&gt;_autogen_timestamp_deps</span></code>目标</a></li>
<li><a class="reference internal" href="#visual-studio">Visual Studio生成器</a></li>
<li><a class="reference internal" href="#windowsqtmain-lib">Windows上的qtmain.lib</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>上一主题</h4>
    <p class="topless"><a href="../prop_sf/COMPILE_DEFINITIONS_CONFIG.html"
                          title="上一章">COMPILE_DEFINITIONS_&lt;CONFIG&gt;</a></p>
  </div>
  <div>
    <h4>下一主题</h4>
    <p class="topless"><a href="cmake-server.7.html"
                          title="下一章">cmake-server(7)</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/manual/cmake-qt.7.rst.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="提交" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总索引"
             >索引</a></li>
        <li class="right" >
          <a href="cmake-server.7.html" title="cmake-server(7)"
             >下一页</a> |</li>
        <li class="right" >
          <a href="../prop_sf/COMPILE_DEFINITIONS_CONFIG.html" title="COMPILE_DEFINITIONS_&lt;CONFIG&gt;"
             >上一页</a> |</li>
  <li>
    <img src="../_static/cmake-logo-16.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="https://cmake.org/">CMake</a> &#187;
  </li>
  <li>
    <a href="../index.html">3.29.1-g21d0c57 Documentation</a> &#187;
  </li>

        <li class="nav-item nav-item-this"><a href="">cmake-qt(7)</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
    &#169; 版权所有 2000-2024 Kitware, Inc. and Contributors.
      由 <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6创建。
    </div>
  </body>
</html>