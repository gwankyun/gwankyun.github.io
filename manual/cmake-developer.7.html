<!DOCTYPE html>

<html lang="zh-CN" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>cmake-developer(7) &mdash; CMake 3.29.1-g21d0c57 Documentation</title>

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a2c47e09" />
    <link rel="stylesheet" type="text/css" href="../_static/cmake.css?v=3e562cf9" />
    
    <script src="../_static/documentation_options.js?v=17f7ec5f"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    
    <link rel="icon" href="../_static/cmake-favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="cmake-env-variables(7)" href="cmake-env-variables.7.html" />
    <link rel="prev" title="cmake-cxxmodules(7)" href="cmake-cxxmodules.7.html" />
 

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="cmake-env-variables.7.html" title="cmake-env-variables(7)"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="cmake-cxxmodules.7.html" title="cmake-cxxmodules(7)"
             accesskey="P">上一页</a> |</li>
  <li>
    <img src="../_static/cmake-logo-16.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="https://cmake.org/">CMake</a> &#187;
  </li>
  <li>
    <a href="../index.html">3.29.1-g21d0c57 Documentation</a> &#187;
  </li>

        <li class="nav-item nav-item-this"><a href="">cmake-developer(7)</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="manual:cmake-developer(7)"></span><section id="cmake-developer-7">
<h1><a class="toc-backref" href="#id8" role="doc-backlink">cmake-developer(7)</a><a class="headerlink" href="#cmake-developer-7" title="Link to this heading">¶</a></h1>
<nav class="contents" id="id1">
<p class="topic-title">目录</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cmake-developer-7" id="id8">cmake-developer(7)</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id9">引言</a></p></li>
<li><p><a class="reference internal" href="#windows" id="id10">访问Windows注册表</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id11">查询Windows注册表</a></p></li>
<li><p><a class="reference internal" href="#find-using-windows-registry" id="id12">使用Windows注册表查找</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#find-modules" id="id13">查找模块</a></p>
<ul>
<li><p><a class="reference internal" href="#cmake-developer-standard-variable-names" id="id14">标准变量名</a></p></li>
<li><p><a class="reference internal" href="#id7" id="id15">查找模块示例</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="id2">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">引言</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p>本手册旨在供使用<span class="target" id="index-0-manual:cmake-language(7)"></span><a class="reference internal" href="cmake-language.7.html#manual:cmake-language(7)" title="cmake-language(7)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">cmake-language(7)</span></code></a>代码的开发人员参考，无论是编写自己的模块，自己的构建系统，还是CMake本身。</p>
<p>请参见<a class="reference external" href="https://cmake.org/get-involved/">https://cmake.org/get-involved/</a>参与CMake上游的开发。它包括到贡献说明的链接，而贡献说明又链接到CMake自身的开发指南。</p>
</section>
<section id="windows">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">访问Windows注册表</a><a class="headerlink" href="#windows" title="Link to this heading">¶</a></h2>
<p>CMake提供了一些工具来访问<code class="docutils literal notranslate"><span class="pre">Windows</span></code>平台上的注册表。</p>
<section id="id3">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">查询Windows注册表</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">在 3.24 版本加入.</span></p>
</div>
<p><span class="target" id="index-0-command:cmake_host_system_information"></span><a class="reference internal" href="../command/cmake_host_system_information.html#command:cmake_host_system_information" title="cmake_host_system_information"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">cmake_host_system_information()</span></code></a>命令提供了在本地计算机上查询注册表的可能性。查看<a class="reference internal" href="../command/cmake_host_system_information.html#query-windows-registry"><span class="std std-ref">cmake_host_system(QUERY_WINDOWS_REGISTRY)</span></a>获取更多信息。</p>
</section>
<section id="find-using-windows-registry">
<span id="id4"></span><h3><a class="toc-backref" href="#id12" role="doc-backlink">使用Windows注册表查找</a><a class="headerlink" href="#find-using-windows-registry" title="Link to this heading">¶</a></h3>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.24 版本发生变更.</span></p>
</div>
<p><span class="target" id="index-0-command:find_file"></span><a class="reference internal" href="../command/find_file.html#command:find_file" title="find_file"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_file()</span></code></a>、<span class="target" id="index-0-command:find_library"></span><a class="reference internal" href="../command/find_library.html#command:find_library" title="find_library"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_library()</span></code></a>、<span class="target" id="index-0-command:find_path"></span><a class="reference internal" href="../command/find_path.html#command:find_path" title="find_path"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_path()</span></code></a>、<span class="target" id="index-0-command:find_program"></span><a class="reference internal" href="../command/find_program.html#command:find_program" title="find_program"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_program()</span></code></a>和<span class="target" id="index-0-command:find_package"></span><a class="reference internal" href="../command/find_package.html#command:find_package" title="find_package"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_package()</span></code></a>命令的<code class="docutils literal notranslate"><span class="pre">HINTS</span></code>和<code class="docutils literal notranslate"><span class="pre">PATHS</span></code>选项提供了在<code class="docutils literal notranslate"><span class="pre">Windows</span></code>平台上查询注册表的可能性。</p>
<p>注册表查询的正式语法，使用带有常规扩展的<a class="reference external" href="https://en.wikipedia.org/wiki/Backus%E2%80%93Naur_form">BNF</a>表示法指定，如下所示：</p>
<pre>
<strong id="grammar-token-registry_query">registry_query </strong> ::=  '[' <a class="reference internal" href="#grammar-token-sep_definition"><code class="xref docutils literal notranslate"><span class="pre">sep_definition</span></code></a>? <a class="reference internal" href="#grammar-token-root_key"><code class="xref docutils literal notranslate"><span class="pre">root_key</span></code></a>
                         ((<a class="reference internal" href="#grammar-token-key_separator"><code class="xref docutils literal notranslate"><span class="pre">key_separator</span></code></a> <a class="reference internal" href="#grammar-token-sub_key"><code class="xref docutils literal notranslate"><span class="pre">sub_key</span></code></a>)? (<a class="reference internal" href="#grammar-token-value_separator"><code class="xref docutils literal notranslate"><span class="pre">value_separator</span></code></a> <a class="reference internal" href="#grammar-token-value_name"><code class="xref docutils literal notranslate"><span class="pre">value_name</span></code></a>_)?)? ']'
<strong id="grammar-token-sep_definition">sep_definition </strong> ::=  '{' <a class="reference internal" href="#grammar-token-value_separator"><code class="xref docutils literal notranslate"><span class="pre">value_separator</span></code></a> '}'
<strong id="grammar-token-root_key">root_key       </strong> ::=  'HKLM' | 'HKEY_LOCAL_MACHINE' | 'HKCU' | 'HKEY_CURRENT_USER' |
                     'HKCR' | 'HKEY_CLASSES_ROOT' | 'HKCC' | 'HKEY_CURRENT_CONFIG' |
                     'HKU' | 'HKEY_USERS'
<strong id="grammar-token-sub_key">sub_key        </strong> ::=  <a class="reference internal" href="#grammar-token-element"><code class="xref docutils literal notranslate"><span class="pre">element</span></code></a> (<a class="reference internal" href="#grammar-token-key_separator"><code class="xref docutils literal notranslate"><span class="pre">key_separator</span></code></a> <a class="reference internal" href="#grammar-token-element"><code class="xref docutils literal notranslate"><span class="pre">element</span></code></a>)*
<strong id="grammar-token-key_separator">key_separator  </strong> ::=  '/' | '\\'
<strong id="grammar-token-value_separator">value_separator</strong> ::=  <a class="reference internal" href="#grammar-token-element"><code class="xref docutils literal notranslate"><span class="pre">element</span></code></a> | ';'
<strong id="grammar-token-value_name">value_name     </strong> ::=  <a class="reference internal" href="#grammar-token-element"><code class="xref docutils literal notranslate"><span class="pre">element</span></code></a> | '(default)'
<strong id="grammar-token-element">element        </strong> ::=  <a class="reference internal" href="#grammar-token-character"><code class="xref docutils literal notranslate"><span class="pre">character</span></code></a>\+
<strong id="grammar-token-character">character      </strong> ::=  &lt;any character except <a class="reference internal" href="#grammar-token-key_separator"><code class="xref docutils literal notranslate"><span class="pre">key_separator</span></code></a> and <a class="reference internal" href="#grammar-token-value_separator"><code class="xref docutils literal notranslate"><span class="pre">value_separator</span></code></a>&gt;
</pre>
<p><a class="reference internal" href="#grammar-token-sep_definition"><code class="xref std std-token docutils literal notranslate"><span class="pre">sep_definition</span></code></a>可选项提供了指定用于分隔<a class="reference internal" href="#grammar-token-sub_key"><code class="xref std std-token docutils literal notranslate"><span class="pre">sub_key</span></code></a>和<a class="reference internal" href="#grammar-token-value_name"><code class="xref std std-token docutils literal notranslate"><span class="pre">value_name</span></code></a>项的字符串的可能性。如果未指定，则使用<code class="docutils literal notranslate"><span class="pre">;</span></code>字符。可以将多个<a class="reference internal" href="#grammar-token-registry_query"><code class="xref std std-token docutils literal notranslate"><span class="pre">registry_query</span></code></a>项指定为路径的一部分。</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c"># example using default separator</span>
<span class="nf">find_file(</span><span class="p">...</span><span class="w"> </span><span class="no">PATHS</span><span class="w"> </span><span class="s">&quot;/root/[HKLM/Stuff;InstallDir]/lib[HKLM\\\\Stuff;Architecture]&quot;</span><span class="nf">)</span>

<span class="c"># example using different specified separators</span>
<span class="nf">find_library(</span><span class="p">...</span><span class="w"> </span><span class="no">HINTS</span><span class="w"> </span><span class="s">&quot;/root/[{|}HKCU/Stuff|InstallDir]/lib[{@@}HKCU\\\\Stuff@@Architecture]&quot;</span><span class="nf">)</span>
</pre></div>
</div>
<p>如果<a class="reference internal" href="#grammar-token-value_name"><code class="xref std std-token docutils literal notranslate"><span class="pre">value_name</span></code></a>项未指定或有特殊名称<code class="docutils literal notranslate"><span class="pre">(default)</span></code>，则返回默认值的内容（如果有）。<a class="reference internal" href="#grammar-token-value_name"><code class="xref std std-token docutils literal notranslate"><span class="pre">value_name</span></code></a>支持的类型有：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">REG_SZ</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">REG_EXPAND_SZ</span></code>。返回被扩展的数据。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">REG_DWORD</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">REG_QWORD</span></code>。</p></li>
</ul>
<p>当注册表查询失败时（通常是因为键不存在或不支持数据类型），字符串<code class="docutils literal notranslate"><span class="pre">/REGISTRY-NOTFOUND</span></code>将被替换为<code class="docutils literal notranslate"><span class="pre">[]</span></code>查询表达式。</p>
</section>
</section>
<section id="find-modules">
<span id="id5"></span><h2><a class="toc-backref" href="#id13" role="doc-backlink">查找模块</a><a class="headerlink" href="#find-modules" title="Link to this heading">¶</a></h2>
<p>“查找模块”是一个<code class="docutils literal notranslate"><span class="pre">Find&lt;PackageName&gt;.cmake</span></code>文件，在调用时由<span class="target" id="index-1-command:find_package"></span><a class="reference internal" href="../command/find_package.html#command:find_package" title="find_package"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_package()</span></code></a>命令加载。</p>
<p>查找模块的主要任务是确定包是否可用，设置<code class="docutils literal notranslate"><span class="pre">&lt;PackageName&gt;_FOUND</span></code>变量以反映这一点，并提供使用包所需的任何变量、宏和导入目标。在上游库没有提供<a class="reference internal" href="cmake-packages.7.html#config-file-packages"><span class="std std-ref">配置文件包</span></a>的情况下，查找模块很有用。</p>
<p>传统的方法是对所有东西都使用变量，包括库和可执行文件：请参阅下面的<a class="reference internal" href="#id6">标准变量名</a>部分。这是CMake提供的大多数现有查找模块所做的。</p>
<p>更现代的方法是通过提供<a class="reference internal" href="cmake-buildsystem.7.html#imported-targets"><span class="std std-ref">导入目标</span></a>，尽可能地像<a class="reference internal" href="cmake-packages.7.html#config-file-packages"><span class="std std-ref">配置文件包</span></a>文件那样运行。这样可以将<a class="reference internal" href="cmake-buildsystem.7.html#target-usage-requirements"><span class="std std-ref">传播使用要求</span></a>给消费者。</p>
<p>在任何一种情况下（甚至在同时提供变量和导入目标时），查找模块都应该提供与具有相同名称的旧版本的向后兼容性。</p>
<p>FindFoo.cmake模块通常通过以下命令加载：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>find_package(Foo [major[.minor[.patch[.tweak]]]]
             [EXACT] [QUIET] [REQUIRED]
             [[COMPONENTS] [components...]]
             [OPTIONAL_COMPONENTS components...]
             [NO_POLICY_SCOPE])
</pre></div>
</div>
<p>有关查找模块设置了哪些变量的详细信息，请参阅<span class="target" id="index-2-command:find_package"></span><a class="reference internal" href="../command/find_package.html#command:find_package" title="find_package"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_package()</span></code></a>文档。其中大多数都是通过使用<span class="target" id="index-0-module:FindPackageHandleStandardArgs"></span><a class="reference internal" href="../module/FindPackageHandleStandardArgs.html#module:FindPackageHandleStandardArgs" title="FindPackageHandleStandardArgs"><code class="xref cmake cmake-module docutils literal notranslate"><span class="pre">FindPackageHandleStandardArgs</span></code></a>来处理的。</p>
<p>简单地说，模块应该只定位与请求版本兼容的包的版本，正如变量族<code class="docutils literal notranslate"><span class="pre">Foo_FIND_VERSION</span></code>所描述的那样。如果<code class="docutils literal notranslate"><span class="pre">Foo_FIND_QUIETLY</span></code>设置为true，它应该避免打印消息，包括没有找到包的任何抱怨。如果<code class="docutils literal notranslate"><span class="pre">Foo_FIND_REQUIRED</span></code>被设置为true，如果找不到包，模块应该发出<code class="docutils literal notranslate"><span class="pre">FATAL_ERROR</span></code>。如果两者都设置为true，则如果它找不到包，则应该打印一条非致命消息。</p>
<p>找到多个半独立部件的包（如库包）应该搜索<code class="docutils literal notranslate"><span class="pre">Foo_FIND_COMPONENTS</span></code>中列出的组件，如果设置为true，并且只有在每个搜索组件<code class="docutils literal notranslate"><span class="pre">&lt;c&gt;</span></code>未找到时才将<code class="docutils literal notranslate"><span class="pre">Foo_FOUND</span></code>设置为true, <code class="docutils literal notranslate"><span class="pre">Foo_FIND_REQUIRED_&lt;c&gt;</span></code>未设置为true。<code class="docutils literal notranslate"><span class="pre">find_package_handle_standard_args()</span></code>的<code class="docutils literal notranslate"><span class="pre">HANDLE_COMPONENTS</span></code>参数可用于实现此功能。</p>
<p>如果没有设置<code class="docutils literal notranslate"><span class="pre">Foo_FIND_COMPONENTS</span></code>，那么搜索哪些模块和需要哪些模块取决于查找模块，但应该标明下来。</p>
<p>对于内部实现，以下划线开头的变量仅供临时使用是一个普遍接受的约定。</p>
<section id="cmake-developer-standard-variable-names">
<span id="id6"></span><h3><a class="toc-backref" href="#id14" role="doc-backlink">标准变量名</a><a class="headerlink" href="#cmake-developer-standard-variable-names" title="Link to this heading">¶</a></h3>
<p>对于采用设置变量方法的<code class="docutils literal notranslate"><span class="pre">FindXxx.cmake</span></code>模块（代替或添加创建导入目标），应该使用以下变量名来保持查找模块之间的一致性。请注意，所有变量都以<code class="docutils literal notranslate"><span class="pre">Xxx_</span></code>开头，除非另有说明，否则必须与<code class="docutils literal notranslate"><span class="pre">FindXxx.cmake</span></code>文件的名称完全匹配，包括大写/小写。变量名上的前缀确保它们不会与其他查找模块的变量冲突。对于查找模块定义的任何宏、函数和导入目标，也应该遵循相同的模式。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_INCLUDE_DIRS</span></code></dt><dd><p>最后一组包含目录列在一个变量中，供客户端代码使用。这不应该是一个缓存条目（注意，这也意味着这个变量不应该用作<span class="target" id="index-1-command:find_path"></span><a class="reference internal" href="../command/find_path.html#command:find_path" title="find_path"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_path()</span></code></a>命令的结果变量——请参阅下面的<code class="docutils literal notranslate"><span class="pre">Xxx_INCLUDE_DIR</span></code>）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_LIBRARIES</span></code></dt><dd><p>与模块一起使用的库。这些可能是CMake目标，库二进制文件的完整绝对路径或链接器必须在其搜索路径中找到的库的名称。这不应该是一个缓存条目（注意，这也意味着这个变量不应该用作<span class="target" id="index-1-command:find_library"></span><a class="reference internal" href="../command/find_library.html#command:find_library" title="find_library"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_library()</span></code></a>命令的结果变量——请参阅下面的<code class="docutils literal notranslate"><span class="pre">Xxx_LIBRARY</span></code>）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_DEFINITIONS</span></code></dt><dd><p>编译使用该模块的代码时要使用的编译定义。这真的不应该包含像<code class="docutils literal notranslate"><span class="pre">-DHAS_JPEG</span></code>这样的选项，客户端源代码文件使用这些选项来决定是否<code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;jpeg.h&gt;</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_EXECUTABLE</span></code></dt><dd><p>可执行文件的完整绝对路径。在这种情况下，<code class="docutils literal notranslate"><span class="pre">Xxx</span></code>可能不是模块的名称，它可能是工具的名称（通常转换为全大写），假设工具具有如此知名的名称，因此不太可能存在具有相同名称的其他工具。将其用作<span class="target" id="index-1-command:find_program"></span><a class="reference internal" href="../command/find_program.html#command:find_program" title="find_program"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_program()</span></code></a>命令的结果变量是合适的。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_YYY_EXECUTABLE</span></code></dt><dd><p>类似于<code class="docutils literal notranslate"><span class="pre">Xxx_EXECUTABLE</span></code>，除了这里<code class="docutils literal notranslate"><span class="pre">Xxx</span></code>总是模块名，<code class="docutils literal notranslate"><span class="pre">YYY</span></code>是工具名（同样，通常是全大写）。如果工具名称不是非常广为人知，或者有可能与其他工具冲突，则首选此形式。为了更大的一致性，如果模块提供了多个可执行文件，也更喜欢这种形式。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_LIBRARY_DIRS</span></code></dt><dd><p>可选地，在一个变量中列出供客户端代码使用的库目录的最终集。这不应该是缓存项。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_ROOT_DIR</span></code></dt><dd><p>在哪里可以找到模块的基目录。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_VERSION_VV</span></code></dt><dd><p>该表单的变量指定所提供的<code class="docutils literal notranslate"><span class="pre">Xxx</span></code>模块是否为该模块的<code class="docutils literal notranslate"><span class="pre">VV</span></code>版本。对于给定的模块，不应该有多个这种形式的变量设置为true。例如，一个模块<code class="docutils literal notranslate"><span class="pre">Barry</span></code>可能已经发展了很多年，并且经历了许多不同的主要版本。版本3的<code class="docutils literal notranslate"><span class="pre">Barry</span></code>模块可能会将变量<code class="docutils literal notranslate"><span class="pre">Barry_VERSION_3</span></code>设置为true，而旧版本的模块可能会将<code class="docutils literal notranslate"><span class="pre">Barry_VERSION_2</span></code>设置为true。<code class="docutils literal notranslate"><span class="pre">Barry_VERSION_3</span></code>和<code class="docutils literal notranslate"><span class="pre">Barry_VERSION_2</span></code>都设置为true将是错误的。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_WRAP_YY</span></code></dt><dd><p>当这种形式的变量被设置为false时，它表示不应该使用相关的包装命令。包装命令取决于模块，它可能由模块名暗示，也可能由变量的<code class="docutils literal notranslate"><span class="pre">YY</span></code>部分指定。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_Yy_FOUND</span></code></dt><dd><p>对于这种形式的变量，<code class="docutils literal notranslate"><span class="pre">Yy</span></code>是模块的组件名。它应该完全匹配可能传递给模块的<span class="target" id="index-3-command:find_package"></span><a class="reference internal" href="../command/find_package.html#command:find_package" title="find_package"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_package()</span></code></a>命令的有效组件名之一。如果将这种形式的变量设置为false，则表示没有找到模块<code class="docutils literal notranslate"><span class="pre">Xxx</span></code>的<code class="docutils literal notranslate"><span class="pre">Yy</span></code>组件或不可用。此表单的变量通常用于可选组件，以便调用方可以检查可选组件是否可用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_FOUND</span></code></dt><dd><p>当<span class="target" id="index-4-command:find_package"></span><a class="reference internal" href="../command/find_package.html#command:find_package" title="find_package"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_package()</span></code></a>命令返回给调用者时，如果认为模块已被成功找到，则该变量将被设置为true。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_NOT_FOUND_MESSAGE</span></code></dt><dd><p>在将<code class="docutils literal notranslate"><span class="pre">Xxx_FOUND</span></code>设置为FALSE的情况下，应该由config-files设置。包含的消息将由<span class="target" id="index-5-command:find_package"></span><a class="reference internal" href="../command/find_package.html#command:find_package" title="find_package"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_package()</span></code></a>命令和<span class="target" id="index-0-command:find_package_handle_standard_args"></span><a class="reference internal" href="../module/FindPackageHandleStandardArgs.html#command:find_package_handle_standard_args" title="find_package_handle_standard_args"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_package_handle_standard_args()</span></code></a>命令打印，以通知用户有关问题。使用此方法而不是直接调用<span class="target" id="index-0-command:message"></span><a class="reference internal" href="../command/message.html#command:message" title="message"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">message()</span></code></a>来报告无法找到模块或包的原因。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_RUNTIME_LIBRARY_DIRS</span></code></dt><dd><p>可选地，运行时库搜索路径，供运行链接到共享库的可执行文件时使用。用户代码应该使用该列表来创建windows上的<code class="docutils literal notranslate"><span class="pre">PATH</span></code>或UNIX上的<code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>。这不应该是缓存项。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_VERSION</span></code></dt><dd><p>找到的包的完整版本字符串，如果有的话。注意，许多现有模块提供的是<code class="docutils literal notranslate"><span class="pre">Xxx_VERSION_STRING</span></code>。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_VERSION_MAJOR</span></code></dt><dd><p>找到的包的主要版本，如果有的话。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_VERSION_MINOR</span></code></dt><dd><p>找到的包的次要版本，如果有的话。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_VERSION_PATCH</span></code></dt><dd><p>找到的包的补丁版本，如果有的话。</p>
</dd>
</dl>
<p>以下名称通常不应该在<code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>文件中使用。它们用于查找模块指定和缓存特定文件或目录的位置。用户通常能够设置和编辑这些变量来控制查找模块的行为（比如手动输入库的路径）:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_LIBRARY</span></code></dt><dd><p>库的路径。仅当模块提供单个库时才使用此表单。将其用作<span class="target" id="index-2-command:find_library"></span><a class="reference internal" href="../command/find_library.html#command:find_library" title="find_library"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_library()</span></code></a>命令中的结果变量是合适的。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_Yy_LIBRARY</span></code></dt><dd><p>模块<code class="docutils literal notranslate"><span class="pre">Xxx</span></code>提供的库<code class="docutils literal notranslate"><span class="pre">Yy</span></code>的路径。当模块提供多个库或其他模块也可能提供相同名称的库时，使用此表单。将这种形式用作<span class="target" id="index-3-command:find_library"></span><a class="reference internal" href="../command/find_library.html#command:find_library" title="find_library"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_library()</span></code></a>命令中的结果变量也是合适的。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_INCLUDE_DIR</span></code></dt><dd><p>当模块只提供一个库时，该变量可用于指定在何处查找使用该库的头文件（或者更准确地说，是该库的消费者应该添加到其头文件搜索路径中的路径）。将其用作<span class="target" id="index-2-command:find_path"></span><a class="reference internal" href="../command/find_path.html#command:find_path" title="find_path"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_path()</span></code></a>命令中的结果变量是合适的。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Xxx_Yy_INCLUDE_DIR</span></code></dt><dd><p>如果模块提供多个库，或者其他模块也可能提供同名库，则建议使用此表单指定在何处查找使用模块提供的库<code class="docutils literal notranslate"><span class="pre">Yy</span></code>的头文件。同样，将它用作<span class="target" id="index-3-command:find_path"></span><a class="reference internal" href="../command/find_path.html#command:find_path" title="find_path"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_path()</span></code></a>命令中的结果变量是合适的。</p>
</dd>
</dl>
<p>为了防止用户被需要配置的设置弄得不知所措，尽量在缓存中保留尽可能多的选项，至少留下一个选项，可用于禁用模块的使用，或定位未找到的库（例如<code class="docutils literal notranslate"><span class="pre">Xxx_ROOT_DIR</span></code>）。出于同样的原因，将大多数缓存选项标记为高级。对于同时提供调试和发布二进制文件的包，通常使用<code class="docutils literal notranslate"><span class="pre">_LIBRARY_&lt;CONFIG&gt;</span></code>后缀创建缓存变量，例如<code class="docutils literal notranslate"><span class="pre">Foo_LIBRARY_RELEASE</span></code>和<code class="docutils literal notranslate"><span class="pre">Foo_LIBRARY_DEBUG</span></code>。<span class="target" id="index-0-module:SelectLibraryConfigurations"></span><a class="reference internal" href="../module/SelectLibraryConfigurations.html#module:SelectLibraryConfigurations" title="SelectLibraryConfigurations"><code class="xref cmake cmake-module docutils literal notranslate"><span class="pre">SelectLibraryConfigurations</span></code></a>模块对这种情况很有帮助。</p>
<p>虽然这些都是标准的变量名，但你应该为实际使用的任何旧名称提供向后兼容性。确保将它们注释为已弃用，这样就不会有人开始使用它们。</p>
</section>
<section id="id7">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">查找模块示例</a><a class="headerlink" href="#id7" title="Link to this heading">¶</a></h3>
<p>我们将描述如何为库<code class="docutils literal notranslate"><span class="pre">Foo</span></code>创建一个简单的查找模块。</p>
<p>模块的顶部应该以许可声明开始，然后是空白行，然后是<a class="reference internal" href="cmake-language.7.html#bracket-comment"><span class="std std-ref">括号注释</span></a>。注释应该以<code class="docutils literal notranslate"><span class="pre">.rst:</span></code>开头，以表明其其余内容是restructuredtext格式的文档。例如：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># Distributed under the OSI-approved BSD 3-Clause License.  See accompanying
# file Copyright.txt or https://cmake.org/licensing for details.

#[=======================================================================[.rst:
FindFoo
-------

Finds the Foo library.

Imported Targets
^^^^^^^^^^^^^^^^

This module provides the following imported targets, if found:

``Foo::Foo``
  The Foo library

Result Variables
^^^^^^^^^^^^^^^^

This will define the following variables:

``Foo_FOUND``
  True if the system has the Foo library.
``Foo_VERSION``
  The version of the Foo library which was found.
``Foo_INCLUDE_DIRS``
  Include directories needed to use Foo.
``Foo_LIBRARIES``
  Libraries needed to link to Foo.

Cache Variables
^^^^^^^^^^^^^^^

The following cache variables may also be set:

``Foo_INCLUDE_DIR``
  The directory containing ``foo.h``.
``Foo_LIBRARY``
  The path to the Foo library.

#]=======================================================================]
</pre></div>
</div>
<p>模块文档包括：</p>
<ul class="simple">
<li><p>带下划线的标题，指定模块名称。</p></li>
<li><p>对模块查找内容的简单描述。某些包可能需要更多的描述。如果模块的用户应该知道一些警告或其他细节，请在这里指定。</p></li>
<li><p>列出由模块提供的导入目标的部分，如果有的话。</p></li>
<li><p>列出模块提供的结果变量的部分。</p></li>
<li><p>可选，列出模块使用的缓存变量的部分，如果有的话。</p></li>
</ul>
<p>如果包提供了任何宏或函数，它们应该被列在一个额外的部分中，但是可以通过在定义这些宏或函数的位置上方的附加<code class="docutils literal notranslate"><span class="pre">.rst:</span></code>注释块进行记录。</p>
<p>查找模块的实现可以从文档块下面开始。现在需要找到实际的库等等。这里的代码显然会因模块而异（毕竟，处理这个问题是查找模块的重点），但是库往往有一个共同的模式。</p>
<p>首先，我们尝试使用<code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>来查找库。请注意，我们不能依赖它，因为它可能不可用，但它提供了一个很好的起点。</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">find_package(</span><span class="nb">PkgConfig</span><span class="nf">)</span>
<span class="nf">pkg_check_modules(</span><span class="nb">PC_Foo</span><span class="w"> </span><span class="no">QUIET</span><span class="w"> </span><span class="nb">Foo</span><span class="nf">)</span>
</pre></div>
</div>
<p>这应该定义一些从<code class="docutils literal notranslate"><span class="pre">PC_Foo_</span></code>开始的变量，其中包含来自<code class="docutils literal notranslate"><span class="pre">Foo.pc</span></code>文件的信息。</p>
<p>现在我们需要找到库并包含文件；我们使用<code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>中的信息为CMake提供有关查找位置的提示。</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">find_path(</span><span class="nb">Foo_INCLUDE_DIR</span>
<span class="w">  </span><span class="no">NAMES</span><span class="w"> </span><span class="nb">foo.h</span>
<span class="w">  </span><span class="no">PATHS</span><span class="w"> </span><span class="o">${</span><span class="nt">PC_Foo_INCLUDE_DIRS</span><span class="o">}</span>
<span class="w">  </span><span class="no">PATH_SUFFIXES</span><span class="w"> </span><span class="nb">Foo</span>
<span class="nf">)</span>
<span class="nf">find_library(</span><span class="nb">Foo_LIBRARY</span>
<span class="w">  </span><span class="no">NAMES</span><span class="w"> </span><span class="nb">foo</span>
<span class="w">  </span><span class="no">PATHS</span><span class="w"> </span><span class="o">${</span><span class="nt">PC_Foo_LIBRARY_DIRS</span><span class="o">}</span>
<span class="nf">)</span>
</pre></div>
</div>
<p>或者，如果库有多个配置可用，你可以使用<span class="target" id="index-1-module:SelectLibraryConfigurations"></span><a class="reference internal" href="../module/SelectLibraryConfigurations.html#module:SelectLibraryConfigurations" title="SelectLibraryConfigurations"><code class="xref cmake cmake-module docutils literal notranslate"><span class="pre">SelectLibraryConfigurations</span></code></a>来自动设置<code class="docutils literal notranslate"><span class="pre">Foo_LIBRARY</span></code>变量：</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">find_library(</span><span class="nb">Foo_LIBRARY_RELEASE</span>
<span class="w">  </span><span class="no">NAMES</span><span class="w"> </span><span class="nb">foo</span>
<span class="w">  </span><span class="no">PATHS</span><span class="w"> </span><span class="o">${</span><span class="nt">PC_Foo_LIBRARY_DIRS</span><span class="o">}</span><span class="na">/Release</span>
<span class="nf">)</span>
<span class="nf">find_library(</span><span class="nb">Foo_LIBRARY_DEBUG</span>
<span class="w">  </span><span class="no">NAMES</span><span class="w"> </span><span class="nb">foo</span>
<span class="w">  </span><span class="no">PATHS</span><span class="w"> </span><span class="o">${</span><span class="nt">PC_Foo_LIBRARY_DIRS</span><span class="o">}</span><span class="na">/Debug</span>
<span class="nf">)</span>

<span class="nf">include(</span><span class="nb">SelectLibraryConfigurations</span><span class="nf">)</span>
<span class="nf">select_library_configurations(</span><span class="nb">Foo</span><span class="nf">)</span>
</pre></div>
</div>
<p>如果你有一个获得版本的好方法（例如，从头文件），你可以使用该信息来设置<code class="docutils literal notranslate"><span class="pre">Foo_VERSION</span></code>（尽管注意，查找模块传统上使用的是<code class="docutils literal notranslate"><span class="pre">Foo_VERSION_STRING</span></code>，所以你可能想要设置两者）。否则，尝试使用<code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>中的信息</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">set(</span><span class="nb">Foo_VERSION</span><span class="w"> </span><span class="o">${</span><span class="nt">PC_Foo_VERSION</span><span class="o">}</span><span class="nf">)</span>
</pre></div>
</div>
<p>现在我们可以使用<span class="target" id="index-1-module:FindPackageHandleStandardArgs"></span><a class="reference internal" href="../module/FindPackageHandleStandardArgs.html#module:FindPackageHandleStandardArgs" title="FindPackageHandleStandardArgs"><code class="xref cmake cmake-module docutils literal notranslate"><span class="pre">FindPackageHandleStandardArgs</span></code></a>为我们完成剩下的大部分工作</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">include(</span><span class="nb">FindPackageHandleStandardArgs</span><span class="nf">)</span>
<span class="nf">find_package_handle_standard_args(</span><span class="nb">Foo</span>
<span class="w">  </span><span class="no">FOUND_VAR</span><span class="w"> </span><span class="nb">Foo_FOUND</span>
<span class="w">  </span><span class="no">REQUIRED_VARS</span>
<span class="w">    </span><span class="nb">Foo_LIBRARY</span>
<span class="w">    </span><span class="nb">Foo_INCLUDE_DIR</span>
<span class="w">  </span><span class="no">VERSION_VAR</span><span class="w"> </span><span class="nb">Foo_VERSION</span>
<span class="nf">)</span>
</pre></div>
</div>
<p>这将检查<code class="docutils literal notranslate"><span class="pre">REQUIRED_VARS</span></code>是否包含值（不以<code class="docutils literal notranslate"><span class="pre">-NOTFOUND</span></code>结尾），并适当地设置<code class="docutils literal notranslate"><span class="pre">Foo_FOUND</span></code>。它还将缓存这些值。如果设置了<code class="docutils literal notranslate"><span class="pre">Foo_VERSION</span></code>，并且所需的版本被传递给<span class="target" id="index-6-command:find_package"></span><a class="reference internal" href="../command/find_package.html#command:find_package" title="find_package"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">find_package()</span></code></a>，它将根据<code class="docutils literal notranslate"><span class="pre">Foo_VERSION</span></code>中的版本检查所请求的版本。它还将酌情打印消息；注意，如果找到了包，它将打印第一个必需变量的内容，以指示找到包的位置。</p>
<p>此时，我们必须为查找模块的用户提供一种方法来链接到找到的库。如上面的<a class="reference internal" href="#id5">查找模块</a>部分所述，有两种方法。传统的变量方法是这样的</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">if(</span><span class="nb">Foo_FOUND</span><span class="nf">)</span>
<span class="w">  </span><span class="nf">set(</span><span class="nb">Foo_LIBRARIES</span><span class="w"> </span><span class="o">${</span><span class="nt">Foo_LIBRARY</span><span class="o">}</span><span class="nf">)</span>
<span class="w">  </span><span class="nf">set(</span><span class="nb">Foo_INCLUDE_DIRS</span><span class="w"> </span><span class="o">${</span><span class="nt">Foo_INCLUDE_DIR</span><span class="o">}</span><span class="nf">)</span>
<span class="w">  </span><span class="nf">set(</span><span class="nb">Foo_DEFINITIONS</span><span class="w"> </span><span class="o">${</span><span class="nt">PC_Foo_CFLAGS_OTHER</span><span class="o">}</span><span class="nf">)</span>
<span class="nf">endif()</span>
</pre></div>
</div>
<p>如果找到了多个库，则应将所有库都包含在这些变量中（有关更多信息，请参阅<a class="reference internal" href="#id6">标准变量名</a>名称部分）。</p>
<p>当提供导入的目标时，这些目标应该有命名空间（因此使用<code class="docutils literal notranslate"><span class="pre">Foo::</span></code>前缀）；CMake将识别传递给<span class="target" id="index-0-command:target_link_libraries"></span><a class="reference internal" href="../command/target_link_libraries.html#command:target_link_libraries" title="target_link_libraries"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">target_link_libraries()</span></code></a>的名称中包含<code class="docutils literal notranslate"><span class="pre">::</span></code>的值应该是导入的目标（而不仅仅是库名），并且如果该目标不存在（参见策略<span class="target" id="index-0-policy:CMP0028"></span><a class="reference internal" href="../policy/CMP0028.html#policy:CMP0028" title="CMP0028"><code class="xref cmake cmake-policy docutils literal notranslate"><span class="pre">CMP0028</span></code></a>），则会产生适当的诊断消息。</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">if(</span><span class="nb">Foo_FOUND</span><span class="w"> </span><span class="no">AND</span><span class="w"> </span><span class="no">NOT</span><span class="w"> </span><span class="no">TARGET</span><span class="w"> </span><span class="nb">Foo</span><span class="o">::</span><span class="nb">Foo</span><span class="nf">)</span>
<span class="w">  </span><span class="nf">add_library(</span><span class="nb">Foo</span><span class="o">::</span><span class="nb">Foo</span><span class="w"> </span><span class="no">UNKNOWN</span><span class="w"> </span><span class="no">IMPORTED</span><span class="nf">)</span>
<span class="w">  </span><span class="nf">set_target_properties(</span><span class="nb">Foo</span><span class="o">::</span><span class="nb">Foo</span><span class="w"> </span><span class="no">PROPERTIES</span>
<span class="w">    </span><span class="no">IMPORTED_LOCATION</span><span class="w"> </span><span class="s">&quot;${Foo_LIBRARY}&quot;</span>
<span class="w">    </span><span class="no">INTERFACE_COMPILE_OPTIONS</span><span class="w"> </span><span class="s">&quot;${PC_Foo_CFLAGS_OTHER}&quot;</span>
<span class="w">    </span><span class="no">INTERFACE_INCLUDE_DIRECTORIES</span><span class="w"> </span><span class="s">&quot;${Foo_INCLUDE_DIR}&quot;</span>
<span class="w">  </span><span class="nf">)</span>
<span class="nf">endif()</span>
</pre></div>
</div>
<p>关于这一点需要注意的一点是，<code class="docutils literal notranslate"><span class="pre">INTERFACE_INCLUDE_DIRECTORIES</span></code>和类似的属性应该只包含关于目标本身的信息，而不包含它的任何依赖项。相反，这些依赖项也应该是目标，并且CMake应该被告知它们是这个目标的依赖项。然后，CMake将自动组合所有必要的信息。</p>
<p>使用<span class="target" id="index-0-command:add_library"></span><a class="reference internal" href="../command/add_library.html#command:add_library" title="add_library"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">add_library()</span></code></a>命令创建的<span class="target" id="index-0-prop_tgt:IMPORTED"></span><a class="reference internal" href="../prop_tgt/IMPORTED.html#prop_tgt:IMPORTED" title="IMPORTED"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">IMPORTED</span></code></a>目标的类型总是可以指定为<code class="docutils literal notranslate"><span class="pre">UNKNOWN</span></code>类型。在可能发现静态或共享变量的情况下，这简化了代码，CMake将通过检查文件来确定类型。</p>
<p>如果库可用于多个配置，<span class="target" id="index-0-prop_tgt:IMPORTED_CONFIGURATIONS"></span><a class="reference internal" href="../prop_tgt/IMPORTED_CONFIGURATIONS.html#prop_tgt:IMPORTED_CONFIGURATIONS" title="IMPORTED_CONFIGURATIONS"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">IMPORTED_CONFIGURATIONS</span></code></a>目标属性也应该被填充：</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">if(</span><span class="nb">Foo_FOUND</span><span class="nf">)</span>
<span class="w">  </span><span class="nf">if</span> <span class="nf">(</span><span class="no">NOT</span><span class="w"> </span><span class="no">TARGET</span><span class="w"> </span><span class="nb">Foo</span><span class="o">::</span><span class="nb">Foo</span><span class="nf">)</span>
<span class="w">    </span><span class="nf">add_library(</span><span class="nb">Foo</span><span class="o">::</span><span class="nb">Foo</span><span class="w"> </span><span class="no">UNKNOWN</span><span class="w"> </span><span class="no">IMPORTED</span><span class="nf">)</span>
<span class="w">  </span><span class="nf">endif()</span>
<span class="w">  </span><span class="nf">if</span> <span class="nf">(</span><span class="nb">Foo_LIBRARY_RELEASE</span><span class="nf">)</span>
<span class="w">    </span><span class="nf">set_property(</span><span class="no">TARGET</span><span class="w"> </span><span class="nb">Foo</span><span class="o">::</span><span class="nb">Foo</span><span class="w"> </span><span class="no">APPEND</span><span class="w"> </span><span class="no">PROPERTY</span>
<span class="w">      </span><span class="no">IMPORTED_CONFIGURATIONS</span><span class="w"> </span><span class="no">RELEASE</span>
<span class="w">    </span><span class="nf">)</span>
<span class="w">    </span><span class="nf">set_target_properties(</span><span class="nb">Foo</span><span class="o">::</span><span class="nb">Foo</span><span class="w"> </span><span class="no">PROPERTIES</span>
<span class="w">      </span><span class="no">IMPORTED_LOCATION_RELEASE</span><span class="w"> </span><span class="s">&quot;${Foo_LIBRARY_RELEASE}&quot;</span>
<span class="w">    </span><span class="nf">)</span>
<span class="w">  </span><span class="nf">endif()</span>
<span class="w">  </span><span class="nf">if</span> <span class="nf">(</span><span class="nb">Foo_LIBRARY_DEBUG</span><span class="nf">)</span>
<span class="w">    </span><span class="nf">set_property(</span><span class="no">TARGET</span><span class="w"> </span><span class="nb">Foo</span><span class="o">::</span><span class="nb">Foo</span><span class="w"> </span><span class="no">APPEND</span><span class="w"> </span><span class="no">PROPERTY</span>
<span class="w">      </span><span class="no">IMPORTED_CONFIGURATIONS</span><span class="w"> </span><span class="no">DEBUG</span>
<span class="w">    </span><span class="nf">)</span>
<span class="w">    </span><span class="nf">set_target_properties(</span><span class="nb">Foo</span><span class="o">::</span><span class="nb">Foo</span><span class="w"> </span><span class="no">PROPERTIES</span>
<span class="w">      </span><span class="no">IMPORTED_LOCATION_DEBUG</span><span class="w"> </span><span class="s">&quot;${Foo_LIBRARY_DEBUG}&quot;</span>
<span class="w">    </span><span class="nf">)</span>
<span class="w">  </span><span class="nf">endif()</span>
<span class="w">  </span><span class="nf">set_target_properties(</span><span class="nb">Foo</span><span class="o">::</span><span class="nb">Foo</span><span class="w"> </span><span class="no">PROPERTIES</span>
<span class="w">    </span><span class="no">INTERFACE_COMPILE_OPTIONS</span><span class="w"> </span><span class="s">&quot;${PC_Foo_CFLAGS_OTHER}&quot;</span>
<span class="w">    </span><span class="no">INTERFACE_INCLUDE_DIRECTORIES</span><span class="w"> </span><span class="s">&quot;${Foo_INCLUDE_DIR}&quot;</span>
<span class="w">  </span><span class="nf">)</span>
<span class="nf">endif()</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">RELEASE</span></code>变量应该首先在属性中列出，以便当用户使用的配置与任何列出的<code class="docutils literal notranslate"><span class="pre">IMPORTED_CONFIGURATIONS</span></code>不完全匹配时选择该变量。</p>
<p>大多数缓存变量应该隐藏在<strong class="program">ccmake</strong>接口中，除非用户显式要求编辑它们。</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">mark_as_advanced(</span>
<span class="w">  </span><span class="nb">Foo_INCLUDE_DIR</span>
<span class="w">  </span><span class="nb">Foo_LIBRARY</span>
<span class="nf">)</span>
</pre></div>
</div>
<p>如果此模块替换旧版本，则应该设置兼容性变量以尽可能减少中断。</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c"># compatibility variables</span>
<span class="nf">set(</span><span class="nb">Foo_VERSION_STRING</span><span class="w"> </span><span class="o">${</span><span class="nt">Foo_VERSION</span><span class="o">}</span><span class="nf">)</span>
</pre></div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#">cmake-developer(7)</a><ul>
<li><a class="reference internal" href="#id2">引言</a></li>
<li><a class="reference internal" href="#windows">访问Windows注册表</a><ul>
<li><a class="reference internal" href="#id3">查询Windows注册表</a></li>
<li><a class="reference internal" href="#find-using-windows-registry">使用Windows注册表查找</a></li>
</ul>
</li>
<li><a class="reference internal" href="#find-modules">查找模块</a><ul>
<li><a class="reference internal" href="#cmake-developer-standard-variable-names">标准变量名</a></li>
<li><a class="reference internal" href="#id7">查找模块示例</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>上一主题</h4>
    <p class="topless"><a href="cmake-cxxmodules.7.html"
                          title="上一章">cmake-cxxmodules(7)</a></p>
  </div>
  <div>
    <h4>下一主题</h4>
    <p class="topless"><a href="cmake-env-variables.7.html"
                          title="下一章">cmake-env-variables(7)</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/manual/cmake-developer.7.rst.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="提交" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总索引"
             >索引</a></li>
        <li class="right" >
          <a href="cmake-env-variables.7.html" title="cmake-env-variables(7)"
             >下一页</a> |</li>
        <li class="right" >
          <a href="cmake-cxxmodules.7.html" title="cmake-cxxmodules(7)"
             >上一页</a> |</li>
  <li>
    <img src="../_static/cmake-logo-16.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="https://cmake.org/">CMake</a> &#187;
  </li>
  <li>
    <a href="../index.html">3.29.1-g21d0c57 Documentation</a> &#187;
  </li>

        <li class="nav-item nav-item-this"><a href="">cmake-developer(7)</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
    &#169; 版权所有 2000-2024 Kitware, Inc. and Contributors.
      由 <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6创建。
    </div>
  </body>
</html>